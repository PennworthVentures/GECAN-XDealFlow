<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base target="_top">
    
    <title>CLASSIFIED: Project Kinesis | The Karavan Protocol | GECAN™ Strategic Mandate</title>
    <meta name="description" content="GECAN-PRIME LEVEL-V DIRECTIVE: The architectural blueprint for a multi-trillion dollar financial utility and the new global settlement rail.">
    <meta name="author" content="GECAN™ | Global Energy & Commodities Alliance Network">
    <meta name="robots" content="noindex, nofollow">

    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>⚜️</text></svg>">
    
    <!-- STYLESHEETS and FONTS remain in the head for immediate visual rendering -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;800;900&family=Cinzel+Decorative:wght@700;900&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS script -->
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        :root {
            --brand-gold-faint: #FFFBEB; --brand-gold-light: #FDE68A; --brand-gold-medium: #D4AF37; --brand-gold-rich: #C9A961; --brand-gold-dark: #92400E;
            --background-primary: #020204; --background-secondary: #0A0A0C; --background-glass: rgba(10, 10, 12, 0.6); --background-glass-premium: rgba(10, 10, 12, 0.85);
            --border-color: rgba(212, 175, 55, 0.2); --border-premium: rgba(212, 175, 55, 0.5); --border-quantum: rgba(212, 175, 55, 0.9);
            --text-diamond: #F5F5F7; --text-gold: #FDE68A; --text-silver: #C2C2C5; --text-muted: #8A8A8E;
            --glow-gold: 0 0 60px rgba(212, 175, 55, 0.5); --shadow-supreme: 0 0 150px rgba(212, 175, 55, 0.4), 0 40px 100px -20px rgba(0, 0, 0, 0.9);
        }
        html { scroll-behavior: smooth; }
        body { font-family: 'Inter', sans-serif; color: var(--text-silver); background: var(--background-primary); overflow-x: hidden; position: relative; }
        body::before { content: ''; position: fixed; inset: 0; background-image: radial-gradient(var(--border-color) 0.5px, transparent 0.5px); background-size: 30px 30px; opacity: 0.15; z-index: -2; animation: pulse-grid 15s ease-in-out infinite; }
        @keyframes pulse-grid { 50% { opacity: 0.05; transform: scale(1.02); } }
        #particles-js { position: fixed; inset: 0; z-index: -1; pointer-events: none; }
        ::-webkit-scrollbar { width: 8px; } ::-webkit-scrollbar-track { background: var(--background-secondary); } ::-webkit-scrollbar-thumb { background: linear-gradient(180deg, var(--brand-gold-medium), var(--brand-gold-rich)); border-radius: 4px; } ::selection { background: var(--brand-gold-medium); color: var(--background-primary); }
        .supreme-header { position: sticky; top: 0; z-index: 1000; background: rgba(2, 2, 4, 0.7); backdrop-filter: blur(40px) saturate(200%); -webkit-backdrop-filter: blur(40px) saturate(200%); border-bottom: 1px solid var(--border-color); transition: all 0.6s cubic-bezier(0.19, 1, 0.22, 1); }
        .supreme-header.scrolled { box-shadow: 0 15px 50px rgba(0, 0, 0, 0.7), 0 0 100px rgba(212, 175, 55, 0.2); border-bottom-color: var(--border-premium); }
        .logo-text { font-family: 'Cinzel Decorative', serif; font-weight: 900; background: linear-gradient(135deg, var(--text-diamond), var(--text-gold)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; letter-spacing: 0.05em; }
        .hero-title { font-family: 'Cinzel Decorative', serif; font-weight: 900; background: linear-gradient(135deg, var(--text-diamond) 0%, var(--brand-gold-light) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-shadow: 0 0 100px rgba(212, 175, 55, 0.7); letter-spacing: 0.02em; }
        .section-title { font-family: 'Orbitron', monospace; font-weight: 800; color: var(--text-gold); text-shadow: 0 0 80px rgba(212, 175, 55, 0.6); letter-spacing: 0.05em; }
        .section-subtitle { font-family: 'Orbitron', monospace; font-weight: 600; color: var(--brand-gold-medium); letter-spacing: 0.2em; text-transform: uppercase; }
        .quantum-card { background: var(--background-glass); backdrop-filter: blur(25px) saturate(180%); border: 1px solid var(--border-color); transition: all 0.6s cubic-bezier(0.165, 0.84, 0.44, 1); position: relative; overflow: hidden; }
        .quantum-card::before { content: ''; position: absolute; inset: 0; background: radial-gradient(circle 500px at var(--mouse-x, 50%) var(--mouse-y, 50%), rgba(212, 175, 55, 0.1), transparent 40%); opacity: 0; transition: opacity 0.6s ease; pointer-events: none; }
        .quantum-card:hover { transform: translateY(-12px) scale(1.02); background: var(--background-glass-premium); border-color: var(--border-quantum); box-shadow: var(--shadow-supreme); }
        .quantum-card:hover::before { opacity: 1; }
        .action-button { font-family: 'Orbitron', monospace; font-weight: 700; color: var(--background-primary); background: linear-gradient(135deg, var(--brand-gold-medium) 0%, var(--brand-gold-rich) 100%); border: 2px solid var(--brand-gold-dark); box-shadow: 0 8px 30px rgba(212, 175, 55, 0.4), inset 0 2px 0 rgba(255, 255, 255, 0.3); transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); position: relative; overflow: hidden; text-transform: uppercase; letter-spacing: 0.1em; }
        .action-button::after { content: ''; position: absolute; top: 50%; left: 50%; width: 5px; height: 5px; background: rgba(255, 255, 255, 0.7); border-radius: 50%; transform: translate(-50%, -50%) scale(0); transition: transform 0.8s ease, width 0.8s ease, height 0.8s ease; }
        .action-button:hover { transform: translateY(-6px) scale(1.05); box-shadow: 0 15px 40px rgba(212, 175, 55, 0.6), inset 0 2px 0 rgba(255, 255, 255, 0.4); background: linear-gradient(135deg, var(--brand-gold-light) 0%, var(--brand-gold-medium) 100%); }
        .action-button:hover::after { transform: translate(-50%, -50%) scale(1); width: 400px; height: 400px; }
        .action-button-secondary { background: transparent; color: var(--brand-gold-medium); border: 2px solid var(--border-premium); box-shadow: none; }
        .action-button-secondary:hover { background: rgba(212, 175, 55, 0.1); color: var(--brand-gold-light); border-color: var(--border-quantum); }
        .stat-card { border-left: 4px solid var(--border-premium); }
        .stat-value { font-family: 'Orbitron', monospace; font-weight: 900; background: linear-gradient(135deg, var(--text-gold), var(--brand-gold-rich)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .pill { background: rgba(212, 175, 55, 0.1); color: var(--brand-gold-light); border: 1px solid rgba(212, 175, 55, 0.3); }
        .team-card { transform-style: preserve-3d; transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .team-card.flipped { transform: rotateY(180deg); }
        .card-face { backface-visibility: hidden; -webkit-backface-visibility: hidden; position: absolute; inset:0; }
        .card-back { transform: rotateY(180deg); }
        .preloader { position: fixed; inset: 0; background: var(--background-primary); z-index: 10000; display: flex; flex-direction: column; align-items: center; justify-content: center; transition: opacity 0.8s ease-out; }
        .preloader-logo { font-family: 'Cinzel Decorative', serif; font-size: 3rem; color: var(--text-gold); animation: pulse-logo 2.5s infinite ease-in-out; }
        @keyframes pulse-logo { 50% { opacity: 0.6; transform: scale(0.98); text-shadow: 0 0 20px rgba(212, 175, 55, 0.5); } }
        .preloader-text { font-family: 'Orbitron', monospace; margin-top: 1rem; color: var(--text-muted); letter-spacing: 0.3em; text-transform: uppercase; font-size: 0.8rem; }
        .moat-diagram .moat-point { transition: all 0.3s ease; }
        .moat-diagram .moat-point:hover { transform: scale(1.5); filter: drop-shadow(0 0 15px var(--brand-gold-medium)); }
        .moat-diagram .moat-point:hover + .moat-label { opacity: 1; transform: translateY(-10px); }
        .moat-diagram .moat-label { transition: all 0.3s ease; opacity: 0.5; }
        .settlement-flow-svg .flow-path { stroke-dasharray: 1000; stroke-dashoffset: 1000; }
        .settlement-flow-svg .flow-node { opacity: 0; transform: scale(0.5); transition: all 0.5s ease; }
    </style>
</head>
<body class="antialiased opacity-0">

    <div id="preloader" class="preloader">
        <div class="preloader-logo">GECAN™</div>
        <p class="preloader-text">VALIDATING GECAN-PRIME CREDENTIALS...</p>
    </div>

    <div id="particles-js"></div>

    <header class="supreme-header">
        <div class="container mx-auto px-6 py-4 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <i class="fas fa-chess-queen text-2xl text-brand-gold-medium"></i>
                <p class="logo-text text-2xl">KARAVAN</p>
            </div>
            <nav class="hidden lg:flex items-center gap-6 text-sm text-text-silver">
                <a href="#imperative" class="hover:text-text-gold transition-colors">Imperative</a>
                <a href="#architecture" class="hover:text-text-gold transition-colors">Architecture</a>
                <a href="#doctrine" class="hover:text-text-gold transition-colors">Doctrine</a>
                <a href="#financials" class="hover:text-text-gold transition-colors">Financials</a>
                <a href="#team" class="hover:text-text-gold transition-colors">Consortium</a>
            </nav>
            <div class="hidden md:flex items-center gap-4">
                 <button id="request-access-btn" class="action-button-secondary px-6 py-2 rounded-full text-sm">Request Access</button>
                 <button id="download-dossier-btn" class="action-button px-6 py-2 rounded-full text-sm">Secure Dossier</button>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-6">

<!-- [SLIDE 1] Hero Section -->
        <section class="min-h-screen flex flex-col items-center justify-center text-center relative overflow-hidden">
            <!-- Background Enhancements -->
            <div class="absolute inset-0 bg-grid-pattern opacity-10"></div>
            <div class="absolute inset-0 bg-radial-gradient(ellipse_at_center,_rgba(212,175,55,0.1)_0%,_transparent_60%)"></div>

            <!-- UI Overlay Elements for "Briefing Room" Atmosphere -->
            <div id="classification-banner" class="absolute top-6 left-6 flex items-center gap-3 p-2 pr-4 border border-red-500/50 bg-red-900/20 rounded-sm text-xs font-mono text-red-400 backdrop-blur-sm">
                <span class="w-3 h-3 bg-red-500 rounded-full animate-pulse"></span>
                <span>CLASSIFICATION: GECAN-PRIME // LEVEL-V</span>
            </div>
            <div id="system-status" class="absolute top-6 right-6 flex items-center gap-4 text-xs font-mono text-text-muted">
                <div class="flex items-center gap-2">
                    <span>SYSTEM STATUS:</span>
                    <span class="text-green-400">NOMINAL</span>
                    <span class="w-2 h-2 bg-green-400 rounded-full animate-ping opacity-75"></span>
                </div>
                <span id="utc-time"></span>
            </div>

            <!-- The 3D Interactive Globe -->
            <div id="holographic-globe-container" class="w-[600px] h-[600px] relative mb-8 transition-transform duration-500 ease-out">
                <!-- Advanced Globe injected by JS -->
            </div>

            <!-- Cinematic Text Block -->
            <div class="relative">
                <h1 id="hero-title" class="hero-title text-5xl md:text-7xl lg:text-8xl opacity-0">PROJECT KINESIS</h1>
                <p id="hero-subtitle" class="section-subtitle mt-4 opacity-0">A NON-DISCRETIONARY EVOLUTION OF GLOBAL FINANCE</p>
                <p id="hero-description" class="mt-6 text-xl md:text-2xl max-w-4xl mx-auto text-text-silver font-light tracking-wide opacity-0">
                    The Architectural Blueprint for a Multi-Trillion Dollar Financial Utility & The Inevitability of a New Global Settlement Rail.
                </p>
            </div>

            <!-- Call to Action -->
            <div id="hero-cta" class="mt-12 opacity-0">
                <a href="#imperative" class="action-button px-10 py-4 rounded-full text-base">
                    <i class="fas fa-angle-double-down mr-2"></i> Uncover The Mandate
                </a>
            </div>
            
            <!-- Animated Scroll Indicator -->
            <div class="absolute bottom-10 text-text-muted animate-bounce">
                <i class="fas fa-chevron-down text-2xl"></i>
            </div>
        </section>

<!-- [SLIDE 2] The Strategic Imperative -->
        <section id="imperative" class="relative min-h-[300vh] py-20 md:py-32">
            <!-- This outer container provides the scroll distance for the animation -->
            <div class="sticky top-0 h-screen flex flex-col justify-center">
                <div id="imperative-animation-container" class="container mx-auto px-6">
                    <div class="text-center">
                        <p id="imperative-subtitle" class="section-subtitle">I. The Strategic Imperative</p>
                        <h2 id="imperative-title" class="section-title text-4xl md:text-5xl mt-4">The $2.3 Trillion Anomaly</h2>
                    </div>
                    <div id="imperative-text-block" class="max-w-4xl mx-auto mt-8 text-center text-lg leading-relaxed">
                        <p class="mb-6">The prevailing infrastructure of cross-border value transfer is no longer merely inefficient; it has become a <span class="text-text-gold font-semibold">juridical and economic anachronism.</span> Rooted in the correspondent banking frameworks of the mid-20th century, it imposes a systemic frictional tax on global commerce—an estimated <span class="text-text-gold font-semibold">$2.3 trillion in annual economic deadweight loss.</span></p>
                        <p>This structural inefficiency, deliberately embedded to serve incumbent interests, represents not merely a market defect but a <span class="text-text-gold font-semibold">civilizational brake on human economic potential.</span> Project Kinesis is the irrevocable GECAN™ mandate to rectify this anomaly.</p>
                    </div>

                    <!-- 3D Visualization Space -->
                    <div id="imperative-3d-space" class="relative h-96 mt-16 perspective-[3000px]">
                        
                        <!-- The "Old System" to be shattered -->
                        <div id="old-system-visual" class="absolute inset-0 flex items-center justify-center">
                            <svg width="200" height="200" viewBox="0 0 100 100">
                                <!-- This SVG represents the archaic, monolithic incumbent system -->
                                <defs>
                                    <filter id="archaic-glow" x="-50%" y="-50%" width="200%" height="200%">
                                        <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
                                        <feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge>
                                    </filter>
                                </defs>
                                <g class="shard-group" filter="url(#archaic-glow)">
                                    <path class="shard" d="M 20 80 L 20 30 L 50 10 L 80 30 L 80 80 Z" fill="none" stroke="var(--border-premium)" stroke-width="1.5"/>
                                    <path class="shard" d="M 20 80 L 80 80" fill="none" stroke="var(--border-premium)" stroke-width="1.5"/>
                                    <path class="shard" d="M 35 80 L 35 40" fill="none" stroke="var(--border-premium)" stroke-width="1.5"/>
                                    <path class="shard" d="M 65 80 L 65 40" fill="none" stroke="var(--border-premium)" stroke-width="1.5"/>
                                    <path class="shard" d="M 50 80 L 50 35" fill="none" stroke="var(--border-premium)" stroke-width="1.5"/>
                                </g>
                            </svg>
                        </div>

                        <!-- The three stat cards, positioned for their reveal animation -->
                        <div id="stat-card-1" class="absolute w-full md:w-1/3 top-0 left-0">
                            <div class="quantum-card rounded-2xl p-8 text-center stat-card h-full">
                                <p class="stat-value text-5xl md:text-6xl" data-value="2.3" data-suffix=" Trillion USD">0</p>
                                <p class="mt-3 font-semibold text-text-silver">Annual Deadweight Loss</p>
                                <p class="mt-1 text-xs text-text-muted">From Frictional Costs & Trapped Capital</p>
                            </div>
                        </div>
                        <div id="stat-card-2" class="absolute w-full md:w-1/3 top-0 left-1/3">
                            <div class="quantum-card rounded-2xl p-8 text-center stat-card h-full">
                                <p class="stat-value text-5xl md:text-6xl" data-value="120" data-suffix=" Hours">0</p>
                                <p class="mt-3 font-semibold text-text-silver">Average Settlement Latency</p>
                                <p class="mt-1 text-xs text-text-muted">Delayed Commerce & Opportunity Cost</p>
                            </div>
                        </div>
                        <div id="stat-card-3" class="absolute w-full md:w-1/3 top-0 left-2/3">
                             <div class="quantum-card rounded-2xl p-8 text-center stat-card h-full">
                                <p class="stat-value text-5xl md:text-6xl" data-value="85" data-suffix="%+">0</p>
                                <p class="mt-3 font-semibold text-text-silver">Structural Cost Inefficiency</p>
                                <p class="mt-1 text-xs text-text-muted">Via Opaque Fees & FX Rent-Extraction</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

<!-- [SLIDE 3-4] Market Quantification & Thesis -->
        <section id="thesis" class="relative min-h-[300vh] py-20 md:py-32">
            <!-- This outer container provides the scroll distance for the animation -->
            <div class="sticky top-0 h-screen flex items-center">
                <div class="container mx-auto px-6">
                    <div class="grid lg:grid-cols-2 gap-16 items-center">
                        <!-- Left Side: Textual Thesis -->
                        <div id="thesis-text-content">
                            <p class="section-subtitle">II. The Investment Thesis</p>
                            <h2 class="section-title text-4xl md:text-5xl mt-4">An Asymmetric Bet On Inevitability</h2>
                            <p class="mt-6 text-lg leading-relaxed">The successor to today’s financial infrastructure must, by necessity, be hybrid in design and regulatory-first in execution. It must reconcile the velocity of decentralized protocols with the sovereign acceptability of regulated frameworks.</p>
                            <p class="mt-4">Incumbents are structurally incapable of this evolution; pure crypto-natives are regulatorily incapacitated. Karavan exploits this vacuum. Investment in Karavan therefore transcends conventional equity valuation. It embodies participation in the foundational reshaping of global financial infrastructure, with asymmetry deriving from the disproportionate upside captured by those positioned at inception relative to the marginal downside bounded by the protocol’s inherently regulated and compliance-first design.</p>
                        </div>

                        <!-- Right Side: 3D Visualization of the Market Funnel -->
                        <div id="market-funnel-3d" class="relative h-[500px] perspective-[2000px]">
                            <!-- The 3D elements will be positioned absolutely within this container -->

                            <!-- Total Addressable Market (TAM) -->
                            <div id="funnel-tam" class="funnel-layer absolute inset-0">
                                <div class="funnel-card quantum-card h-full w-full flex flex-col justify-center p-8">
                                    <p class="font-bold text-text-diamond text-lg">Total Addressable Market (TAM)</p>
                                    <p class="stat-value text-5xl">$150.8 Trillion</p>
                                    <p class="text-sm text-text-muted mt-2">The full systemic volume of global value transfer; the entire ocean.</p>
                                </div>
                            </div>

                            <!-- Serviceable Addressable Market (SAM) -->
                            <div id="funnel-sam" class="funnel-layer absolute inset-0">
                                <div class="funnel-card quantum-card h-full w-full flex flex-col justify-center p-8">
                                    <p class="font-bold text-text-diamond text-lg">Serviceable Addressable Market (SAM)</p>
                                    <p class="stat-value text-5xl">$450 Billion</p>
                                    <p class="text-sm text-text-muted mt-2">Phase I & II priority corridors where infrastructural asymmetry is highest.</p>
                                </div>
                            </div>

                            <!-- Serviceable Obtainable Market (SOM) -->
                            <div id="funnel-som" class="funnel-layer absolute inset-0">
                                <div class="funnel-card quantum-card h-full w-full flex flex-col justify-center p-8">
                                    <p class="font-bold text-text-diamond text-lg">Serviceable Obtainable Market (SOM)</p>
                                    <p class="stat-value text-5xl">$12.55 Billion</p>
                                    <p class="text-sm text-text-muted mt-2">Projected Year 5 GTV via disciplined ~2.7% penetration.</p>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </section>

<!-- [SLIDE 5-6] The 15-Point Moat -->
        <section id="moat" class="py-20 md:py-32">
            <div class="text-center">
                <p class="section-subtitle">IV. The Defensible Moat</p>
                <h2 class="section-title text-4xl md:text-5xl mt-4">A Fortress of Inevitability</h2>
                <p class="mt-4 max-w-4xl mx-auto text-lg">Our advantage is not a feature; it is a system. Karavan establishes a fortified, multi-jurisdictional moat, interwoven legally, technologically, and operationally to create a fortress of competitive durability that is existentially irreplicable by any competitor class.</p>
            </div>
            <div class="quantum-card rounded-2xl p-8 md:p-12 mt-16 relative">
                <!-- Tooltip for interactive phase -->
                <div id="moat-tooltip" class="absolute top-0 left-0 bg-background-primary border border-border-premium p-4 rounded-lg text-sm shadow-lg pointer-events-none opacity-0 transition-opacity z-20 max-w-xs"></div>
                
                <!-- Main SVG Container for the animated fortress -->
                <svg id="moat-diagram" class="moat-diagram w-full h-auto" viewBox="0 0 1000 600">
                    <!-- SVG content will be dynamically built and animated by JavaScript -->
                </svg>

                 <div class="mt-8 pt-6 border-t border-border-premium text-center">
                    <p class="font-bold text-text-diamond">To attack Karavan, incumbents must commit structural hara-kiri. To ignore it, they concede inevitability.</p>
                </div>
            </div>
        </section>

<!-- [SLIDE 7-9] The Kinesis Engine Architecture -->
        <section id="architecture" class="py-20 md:py-32">
            <!-- Container for the entire cinematic sequence -->
            <div id="architecture-container">
                <div id="architecture-intro" class="text-center">
                    <p class="section-subtitle">V. The Operational Doctrine</p>
                    <h2 class="section-title text-4xl md:text-5xl mt-4">The Kinesis Engine</h2>
                    <p class="mt-4 max-w-3xl mx-auto text-lg">A self-reinforcing, tripartite system. Observe its construction, layer by sovereign layer.</p>
                </div>

                <!-- 3D Visualization Space for the Layers -->
                <div id="architecture-3d-space" class="relative h-[500px] mt-16 perspective-[3000px]">
                    
                    <!-- Layer 1: The Liquidity Network (The Sovereign Moat) -->
                    <div id="engine-layer-1" class="engine-layer absolute inset-x-0 mx-auto w-full md:w-3/4 lg:w-1/2">
                        <div class="quantum-card rounded-2xl p-8 h-full w-full flex flex-col items-center justify-center text-center">
                            <i class="fas fa-landmark text-5xl text-brand-gold-medium mb-6"></i>
                            <h3 class="font-bold text-2xl text-text-diamond mb-3">Layer 1: The Liquidity Network</h3>
                            <p class="font-semibold text-brand-gold-light mb-4">(The Sovereign Moat)</p>
                            <p class="text-sm">A global consortium of GECAN™-vetted, licensed financial partners providing regulated fiat on/off-ramps. Our physical, human-based moat, impossible for pure-tech entities to replicate.</p>
                        </div>
                    </div>

                    <!-- Layer 2: The Blockchain Rail (The Digital Artery) -->
                    <div id="engine-layer-2" class="engine-layer absolute inset-x-0 mx-auto w-full md:w-3/4 lg:w-1/2">
                        <div class="quantum-card rounded-2xl p-8 h-full w-full flex flex-col items-center justify-center text-center">
                            <i class="fas fa-atom text-5xl text-brand-gold-medium mb-6"></i>
                            <h3 class="font-bold text-2xl text-text-diamond mb-3">Layer 2: The Blockchain Rail</h3>
                            <p class="font-semibold text-brand-gold-light mb-4">(The Digital Artery)</p>
                            <p class="text-sm">The immutable, instantaneous core for atomic settlement. Its integrated Compliance Firewall ensures military-grade regulatory adherence in milliseconds, eliminating all settlement and regulatory risk.</p>
                        </div>
                    </div>

                    <!-- Layer 3: The Abstraction Layer (The User-Facing Suite) -->
                    <div id="engine-layer-3" class="engine-layer absolute inset-x-0 mx-auto w-full md:w-3/4 lg:w-1/2">
                         <div class="quantum-card rounded-2xl p-8 h-full w-full flex flex-col items-center justify-center text-center">
                            <i class="fas fa-layer-group text-5xl text-brand-gold-medium mb-6"></i>
                            <h3 class="font-bold text-2xl text-text-diamond mb-3">Layer 3: The Abstraction Layer</h3>
                            <p class="font-semibold text-brand-gold-light mb-4">(The User-Facing Suite)</p>
                            <p class="text-sm">The intuitive, fiat-denominated interface that abstracts all underlying complexity. The power of a global financial institution delivered with the simplicity of a consumer application.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

<!-- [SLIDE 10-11] The 180-Second Protocol -->
        <section class="py-20 md:py-32">
            <div class="text-center">
                <p class="section-subtitle">VI. Operational Supremacy</p>
                <h2 class="section-title text-4xl md:text-5xl mt-4">The 180-Second Global Settlement Protocol</h2>
                <p class="mt-4 max-w-4xl mx-auto text-lg">Observe the operational efficacy of atomic, multi-jurisdictional settlement. This is not a theoretical model; it is the codified, repeatable workflow that renders the incumbent system obsolete. From days of uncertainty to sub-three-minute, legally enforceable finality.</p>
            </div>
            <div class="quantum-card rounded-2xl mt-16 p-8 md:p-12 relative overflow-visible">
                <!-- Main Visualization Container -->
                <div class="grid lg:grid-cols-2 gap-x-12 items-center">
                    <!-- The 3D Animated SVG Scene -->
                    <div class="h-[600px] relative perspective-[2000px]">
                        <svg id="settlement-flow-svg" class="w-full h-full" viewBox="0 0 1200 600" preserveAspectRatio="xMidYMid meet"></svg>
                    </div>

                    <!-- The Dynamic Information Panel -->
                    <div id="settlement-info-panel" class="h-[600px] flex flex-col justify-center space-y-4 p-8 bg-background-primary/50 rounded-lg border border-border-color backdrop-blur-sm">
                        <!-- Content is dynamically injected by JavaScript -->
                        <div class="text-center py-20 text-text-muted">
                            <i class="fas fa-mouse-pointer text-4xl mb-4"></i>
                            <p>Scroll to witness the protocol in action.</p>
                        </div>
                    </div>
                </div>

                <!-- Interactive Timeline Navigation -->
                <div id="settlement-timeline-nav" class="flex justify-between items-center mt-12 border-t-2 border-border-premium pt-6">
                    <!-- Navigation buttons are dynamically injected by JavaScript -->
                </div>

                <!-- Strategic Highlights -->
                <div class="mt-12 border-t-2 border-border-color pt-8">
                     <h3 class="text-2xl font-bold text-text-diamond mb-6 text-center">Protocol Strategic Highlights</h3>
                     <div class="grid md:grid-cols-2 gap-x-8 gap-y-4 text-sm">
                        <div class="flex items-start"><i class="fas fa-check-circle text-brand-gold-medium mr-3 mt-1"></i><span><strong>Atomic, Multi-Jurisdictional Integrity:</strong> Each transaction is executed with zero settlement risk, irrespective of cross-border corridors, eliminating counterparty default potential.</span></div>
                        <div class="flex items-start"><i class="fas fa-check-circle text-brand-gold-medium mr-3 mt-1"></i><span><strong>Legally Defensible Execution:</strong> Every stage produces timestamped, immutable, and cryptographically auditable records, enforceable under prevailing banking and regulatory frameworks.</span></div>
                        <div class="flex items-start"><i class="fas fa-check-circle text-brand-gold-medium mr-3 mt-1"></i><span><strong>Regulatory-First Compliance:</strong> Automated AML, CTF, and sanctions enforcement is embedded at the protocol layer, ensuring instantaneous legal alignment across all jurisdictions.</span></div>
                        <div class="flex items-start"><i class="fas fa-check-circle text-brand-gold-medium mr-3 mt-1"></i><span><strong>Proof-of-Settlement as a Legal Instrument:</strong> The final PoSC serves as contractually enforceable evidence, usable for internal audit, compliance review, and dispute resolution.</span></div>
                        <div class="flex items-start"><i class="fas fa-check-circle text-brand-gold-medium mr-3 mt-1"></i><span><strong>Full FX & Liquidity Transparency:</strong> The Pinnacle Quote™ mechanism guarantees institutional FX rates and sub-1% all-in fees, eliminating hidden spreads endemic in legacy rails.</span></div>
                        <div class="flex items-start"><i class="fas fa-check-circle text-brand-gold-medium mr-3 mt-1"></i><span><strong>User-Centric Abstraction:</strong> End-users interact entirely in familiar fiat terms, with all blockchain, treasury, and compliance complexity fully abstracted and automated.</span></div>
                     </div>
                </div>
            </div>
        </section>
        
<!-- [SLIDE 12-13] Governance & Expansion -->
        <section id="doctrine" class="py-20 md:py-32">
            <div class="text-center">
                 <p class="section-subtitle">VII. Governance & Expansion</p>
                <h2 class="section-title text-4xl md:text-5xl mt-4">The "Sovereign Respect" Doctrine</h2>
                <p class="mt-4 max-w-4xl mx-auto text-lg">Our regulatory architecture is not ancillary; it is the operational bedrock. We do not circumvent jurisdictional authority; we amplify regulatory visibility, transforming GECAN™ into an indispensable partner in national security and sovereign oversight. This doctrine converts compliance from a procedural obligation into a strategic weapon.</p>
            </div>
            
            <!-- Main Visualization Container -->
            <div class="mt-16 grid lg:grid-cols-5 gap-12 items-center">
                <!-- Left Panel: Corridor-by-Corridor Doctrine -->
                <div class="lg:col-span-2">
                    <div class="quantum-card rounded-2xl p-8 h-full">
                        <h3 class="text-2xl font-bold text-text-diamond mb-4">The Corridor-by-Corridor Doctrine</h3>
                        <p class="text-sm mb-6">A meticulously sequenced, capital-efficient campaign of corridor activation. Each corridor functions as a strategic foothold and a funding engine for subsequent expansion.</p>
                        <div id="doctrine-phases" class="space-y-4">
                            <!-- Phase descriptions will be dynamically highlighted by the animation -->
                            <div id="phase-1" class="phase-card p-4 rounded-lg border border-border-color transition-all duration-500"><strong>Phase I (0-18 Mo): ASEAN Hub Pilot.</strong> Corridors: SG→PH, UAE→PH. Objective: Establish operational credibility and regulatory trust.</div>
                            <div id="phase-2" class="phase-card p-4 rounded-lg border border-border-color transition-all duration-500"><strong>Phase II (19-36 Mo): MENA-Asia Bridge.</strong> Corridors: UAE→IN, UAE→ID. Objective: Build institutional adoption and liquidity synergies.</div>
                            <div id="phase-3" class="phase-card p-4 rounded-lg border border-border-color transition-all duration-500"><strong>Phase III (37-60 Mo): Global Network Effect.</strong> Corridors: EU, LATAM, SSA. Objective: Achieve dominant market share.</div>
                        </div>
                    </div>
                </div>

                <!-- Center Panel: Interactive World Map -->
                <div class="lg:col-span-3 h-[600px] relative">
                    <svg id="world-map-svg" class="absolute inset-0 w-full h-full" viewBox="0 0 1000 500"></svg>

                    <!-- Overlay for the Regulator's Dashboard -->
                    <div id="regulator-dashboard-overlay" class="absolute bottom-4 left-4 right-4 quantum-card rounded-2xl p-6 bg-background-glass-premium border-border-quantum opacity-0">
                        <h3 class="text-xl font-bold text-text-diamond mb-2">Conceptual Regulator's Dashboard</h3>
                        <p class="text-xs text-text-muted mb-4">Delivering Unprecedented Sovereign Oversight</p>
                        <div class="grid grid-cols-2 gap-x-6 gap-y-4">
                            <div><p class="text-xs text-text-muted">24h GTV (Anonymized)</p><p class="stat-value text-2xl" data-value="1.42" data-suffix="B">$0</p></div>
                            <div><p class="text-xs text-text-muted">Avg. Settlement Finality</p><p class="stat-value text-2xl">&lt;180s</p></div>
                            <div><p class="text-xs text-text-muted">Avg. Tx Size</p><p class="stat-value text-2xl" data-value="2350" data-prefix="$">$0</p></div>
                            <div><p class="text-xs text-text-muted">AML/CTF Flags Triggered</p><p class="stat-value text-2xl text-green-400" data-value="0">0</p></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

<!-- [SLIDE 14] The Core Team -->
        <section id="team" class="py-20 md:py-32">
            <div class="text-center">
                <p class="section-subtitle">VIII. The Consortium</p>
                <h2 class="section-title text-4xl md:text-5xl mt-4">Domain Alpha Operators</h2>
                <p class="mt-4 max-w-3xl mx-auto text-lg">The execution of this mandate is contingent upon the caliber of its leadership. This is a bifurcated consortium blending "Old World" credibility with "New World" agility, purpose-built with deep, verifiable track records in the precise domains required for success.</p>
            </div>

            <!-- 3D Visualization Space for the Team Carousel -->
            <div id="team-3d-space" class="relative h-[500px] mt-16 perspective-[3000px]">
                <!-- The team cards will be dynamically injected and positioned in 3D space by JavaScript -->
            </div>
            
            <!-- Carousel Navigation Controls -->
            <div id="team-nav-controls" class="flex justify-center items-center gap-8 mt-8 opacity-0">
                <button id="team-prev-btn" class="carousel-btn text-3xl text-text-muted hover:text-text-gold transition-colors"><i class="fas fa-chevron-left"></i></button>
                <div id="team-operator-name" class="text-2xl font-bold text-text-diamond text-center w-80 h-8"></div>
                <button id="team-next-btn" class="carousel-btn text-3xl text-text-muted hover:text-text-gold transition-colors"><i class="fas fa-chevron-right"></i></button>
            </div>
            
            <!-- Dossier Text Area for displaying detailed bios -->
            <div id="team-dossier-text" class="mt-4 min-h-[120px] max-w-3xl mx-auto text-center text-lg leading-relaxed text-text-silver transition-opacity duration-500">
                <p class="italic text-text-muted">Select an operator to review their dossier.</p>
            </div>
        </section>

        <!-- [SLIDE 15-17] Financials -->
        <section id="financials" class="py-20 md:py-32">
            <div class="text-center">
                <p class="section-subtitle">IX. The Financial Architecture</p>
                <h2 class="section-title text-4xl md:text-5xl mt-4">A Calculated Trajectory</h2>
                <p class="mt-4 max-w-4xl mx-auto text-lg">A capital-efficient, multi-vector monetization model designed for systemic scalability, resilience, and defensibility. Our projections are derived from a rigorous, proprietary market penetration model, reflecting conservative assumptions for phased execution and justifying a premier financial infrastructure valuation.</p>
            </div>
            <div class="grid lg:grid-cols-5 gap-8 items-end mt-16">
                <div class="lg:col-span-3 quantum-card rounded-2xl p-8">
                     <canvas id="financial-chart"></canvas>
                </div>
                <div class="lg:col-span-2 space-y-6">
                    <div class="quantum-card rounded-xl p-6">
                        <p class="text-sm text-text-muted">Year 5 GTV (Conservative)</p>
                        <p class="stat-value text-4xl">$12.55 Billion</p>
                    </div>
                    <div class="quantum-card rounded-xl p-6">
                        <p class="text-sm text-text-muted">Year 5 ARR (Projected)</p>
                        <p class="stat-value text-4xl">$70.5 Million</p>
                    </div>
                     <div class="quantum-card rounded-xl p-6">
                        <p class="text-sm text-text-muted">Year 5 Valuation Pathway</p>
                        <p class="stat-value text-4xl">$2.11B+</p>
                        <p class="text-xs text-text-muted">Based on peer 30x EV/Revenue Multiple (Stripe, Adyen)</p>
                    </div>
                </div>
            </div>
             <div class="quantum-card rounded-2xl p-8 md:p-12 mt-12">
                <h3 class="text-2xl font-bold text-text-diamond mb-6 text-center">Four-Vector Monetization Model</h3>
                <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <div class="text-center p-4"><i class="fas fa-users text-4xl text-brand-gold-medium mb-3"></i><h4 class="font-bold text-text-diamond">1. Remittance Flow</h4><p class="text-sm text-text-muted">0.5-1.0% | The Volume & Network Effect Engine</p></div>
                    <div class="text-center p-4"><i class="fas fa-building text-4xl text-brand-gold-medium mb-3"></i><h4 class="font-bold text-text-diamond">2. B2B Payment Flow</h4><p class="text-sm text-text-muted">0.15-0.35% | The High-Margin Engine</p></div>
                    <div class="text-center p-4"><i class="fas fa-cogs text-4xl text-brand-gold-medium mb-3"></i><h4 class="font-bold text-text-diamond">3. Value-Added Services</h4><p class="text-sm text-text-muted">SaaS Fees | The IP Monetization Engine</p></div>
                    <div class="text-center p-4"><i class="fas fa-chart-line text-4xl text-brand-gold-medium mb-3"></i><h4 class="font-bold text-text-diamond">4. Treasury & Yield</h4><p class="text-sm text-text-muted">2-4% APY | The Capital Efficiency Engine</p></div>
                </div>
            </div>
        </section>

        <!-- [SLIDE 18-19] The Investment Proposition -->
        <section id="investment-section" class="py-20 md:py-32">
            <div class="text-center">
                <p class="section-subtitle">X. The Invitation</p>
                <h2 class="section-title text-4xl md:text-5xl mt-4">Co-Author The Future of Finance</h2>
                <p class="mt-4 max-w-4xl mx-auto text-lg">This is not an investment in a speculative asset or a transient technology trend. It is an opportunity to co-author the construction of indispensable, protocol-level infrastructure for the 21st-century global economy. It is a chance to co-create, co-govern, and co-benefit from the financial infrastructure of the future.</p>
            </div>
            <div class="quantum-card rounded-2xl p-8 md:p-12 mt-16">
                <div class="grid lg:grid-cols-2 gap-12 items-center">
                    <div>
                        <h3 class="text-3xl font-bold text-text-diamond">Seed Round: <span class="text-brand-gold-light">$10,000,000</span></h3>
                        <p class="mt-4 mb-8 text-lg">This is not operational runway. This is high-leverage strategic fuel deployed to construct an impenetrable moat and accelerate global market capture. Each dollar is directly convertible into structural ownership of the protocol.</p>
                        <div class="use-of-funds-chart-container h-64">
                            <canvas id="use-of-funds-chart"></canvas>
                        </div>
                    </div>
                    <div class="text-center p-8 border-2 border-border-premium rounded-xl bg-background-primary shadow-2xl">
                         <h4 class="font-bold text-lg mb-4 text-text-diamond">Seed Phase Status</h4>
                         <div id="investment-ticker" class="stat-value text-5xl my-4">$1,254,832.19</div>
                         <p class="text-sm text-text-muted">Committed Capital (Live Simulation)</p>
                         <div class="w-full bg-background-secondary h-4 rounded-full mt-4 border border-border-color">
                             <div id="investment-progress-bar" class="bg-gradient-to-r from-brand-gold-medium to-brand-gold-light h-full rounded-full" style="width: 12.5%;"></div>
                         </div>
                         <button id="invest-now-btn" class="action-button px-8 py-4 rounded-xl text-lg mt-8 w-full">SECURE YOUR POSITION</button>
                    </div>
                </div>
            </div>
        </section>

        <footer class="text-center py-12 border-t border-border-color mt-20">
            <p class="logo-text text-3xl mb-4">GECAN™</p>
            <p class="text-sm text-text-muted">Global Energy & Commodities Alliance Network</p>
            <p class="text-xs text-text-muted mt-2">© 2025. All Rights Reserved. Powered by Pennworth Ventures.</p>
            <p class="text-xs italic text-text-muted mt-8 max-w-2xl mx-auto">"True greatness is not built in the comfort of the present, but in the relentless pursuit of a future so bold it terrifies the timid and inspires the fearless." – GECAN Founders’ Maxim</p>
        </footer>
    </main>
    
<div id="dossier-modal" class="fixed inset-0 z-[9999] flex items-center justify-center p-4 hidden opacity-0 transition-opacity duration-500">
        <div class="absolute inset-0 bg-black/80" id="modal-backdrop"></div>
        <div class="modal-content quantum-card rounded-2xl w-full max-w-md p-8 relative border-2 border-border-premium shadow-supreme" id="modal-content-container">
            <button id="close-modal-btn" class="absolute top-4 right-4 text-text-muted hover:text-text-diamond text-2xl font-bold transition-transform hover:scale-125">&times;</button>
            <h3 class="section-title text-2xl mb-2">Secure Dossier Access</h3>
            <p class="text-sm text-text-muted mb-6">Enter GECAN-PRIME credentials to download the Level-V classified document.</p>
            <div id="modal-error" class="text-red-400 text-sm mb-4 hidden border border-red-500/50 bg-red-500/10 p-3 rounded-lg"></div>
            <form id="dossier-form" class="space-y-4">
                <input type="email" id="investor-email" placeholder="Your Corporate Email Address" class="form-input w-full p-3 rounded-lg text-sm" required>
                <input type="password" id="dossier-password" placeholder="Access Code" class="form-input w-full p-3 rounded-lg text-sm" required>
                <button type="submit" id="submit-dossier-btn" class="action-button w-full py-3 rounded-lg mt-2">Authorize & Download</button>
            </form>
            <p class="text-xs text-text-muted mt-4 text-center">By proceeding, you acknowledge and agree to the terms of the executed Non-Disclosure & Non-Circumvention Agreement. An access notification will be dispatched to GECAN™ Compliance.</p>
        </div>
    </div>
    
    <div id="pdf-render-target" class="hidden">
        <style>
            .pdf-page { page-break-after: always; padding: 15mm; position: relative; width: 210mm; height: 297mm; background: #ffffff; color: #111; font-family: 'Inter', sans-serif; }
            .pdf-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #D4AF37; padding-bottom: 5mm; }
            .pdf-logo { font-family: 'Cinzel Decorative', serif; font-size: 24px; font-weight: 900; color: #111; }
            .pdf-tagline { font-size: 8px; color: #777; text-transform: uppercase; letter-spacing: 1.5px; }
            .pdf-title { font-family: 'Orbitron', serif; font-size: 28px; font-weight: 900; text-align: center; margin: 12mm 0; color: #111; }
            .pdf-section-title { font-family: 'Orbitron', monospace; font-size: 14px; font-weight: 800; color: #111; border-bottom: 1.5px solid #D4AF37; padding-bottom: 2mm; margin-bottom: 5mm; margin-top: 8mm; text-transform: uppercase; letter-spacing: 1px; }
            .pdf-text { font-size: 10px; line-height: 1.6; text-align: justify; }
            .pdf-list-item { margin-left: 5mm; margin-bottom: 2mm; font-size: 10px; line-height: 1.6; }
            .pdf-stat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8mm; margin-top: 5mm;}
            .pdf-stat-item { background: #f7f7f7; padding: 5mm; border-left: 3px solid #D4AF37; }
            .pdf-stat-value { font-family: 'Orbitron', monospace; font-size: 18px; font-weight: 900; color: #111; }
            .pdf-stat-label { font-size: 9px; color: #666; }
            .pdf-table { width: 100%; margin-top: 5mm; border-collapse: collapse; font-size: 9px; }
            .pdf-table th, .pdf-table td { border: 1px solid #ddd; padding: 2.5mm; text-align: left; vertical-align: top; }
            .pdf-table th { background-color: #f2f2f2; font-weight: 600; font-family: 'Orbitron', monospace; }
            .pdf-footer { position: absolute; bottom: 10mm; left: 15mm; right: 15mm; display: flex; justify-content: space-between; font-size: 7px; color: #aaa; border-top: 1px solid #ddd; padding-top: 2mm;}
            .pdf-highlight { background-color: #FFFBEB; border-left: 3px solid #FDE68A; padding: 3mm; margin: 4mm 0; font-style: italic;}
            .pdf-team-member { margin-bottom: 4mm; }
        </style>

        <div class="pdf-page" id="pdf-page-1">
            <div class="pdf-header"> <div class="pdf-logo">KARAVAN</div> <div> <p class="font-bold text-base">PROJECT KINESIS</p> <p class="pdf-tagline">GECAN-PRIME // LEVEL-V STRATEGIC DIRECTIVE</p> </div> </div>
            <div style="text-align: center; margin-top: 60mm;">
                 <h1 style="font-family: 'Cinzel Decorative', serif; font-size: 48px; font-weight: 900; color: #111; letter-spacing: 2px;">PROJECT KINESIS</h1>
                 <p style="font-family: 'Orbitron', serif; font-size: 16px; margin-top: 10mm;">The Architectural Blueprint for a Multi-Trillion Dollar Financial Utility & The Inevitability of a New Global Settlement Rail.</p>
            </div>
            <div class="pdf-footer"> <span>STRICTLY CONFIDENTIAL - FOR INTENDED RECIPIENT ONLY</span> <span>Page 1 of 9</span> </div>
        </div>
        
        <div class="pdf-page" id="pdf-page-2">
            <div class="pdf-header"> <div class="pdf-logo">KARAVAN</div> <p class="pdf-tagline">THE STRATEGIC IMPERATIVE</p> </div>
            <h1 class="pdf-title">The $2.3 Trillion Anomaly</h1>
            <p class="pdf-text">The prevailing infrastructure of cross-border value transfer is no longer merely inefficient; it has become a <strong>juridical and economic anachronism</strong>. Rooted in the correspondent banking frameworks of the mid-20th century, it has calcified into an architecture of latency, opacity, and rent-extraction. It imposes what can only be described as a systemic frictional tax on global commerce—an estimated <strong>$2.3 trillion in annual economic deadweight loss</strong> as measured by the World Bank (2024) and the Bank for International Settlements (BIS, 2025).</p>
            <p class="pdf-text pdf-highlight">This structural inefficiency, deliberately embedded to serve the interests of incumbents, represents not merely a market defect but a <strong>civilizational brake on human economic potential.</strong></p>
            <p class="pdf-text">Project Kinesis is the irrevocable GECAN™ mandate to rectify this anomaly. It is not the launch of another ephemeral financial product, nor the speculative deployment of an experimental protocol. It is the construction of a permanent financial utility—an infrastructural settlement rail as fundamental to the 21st century as telecommunication networks were to the 20th.</p>
             <h2 class="pdf-section-title">Incumbent System Failures Quantified</h2>
            <div class="pdf-stat-grid">
                <div class="pdf-stat-item"> <p class="pdf-stat-value">T+2 to T+5</p><p class="pdf-stat-label">Settlement Latency (48-120 Hours)</p> </div>
                <div class="pdf-stat-item"> <p class="pdf-stat-value">4% - 8%</p><p class="pdf-stat-label">Average End-to-End Fees (inc. FX spreads)</p> </div>
                <div class="pdf-stat-item"> <p class="pdf-stat-value">Zero</p><p class="pdf-stat-label">Singular, Immutable Auditability</p> </div>
                <div class="pdf-stat-item"> <p class="pdf-stat-value">High</p><p class="pdf-stat-label">Counterparty & Settlement Risk</p> </div>
            </div>
            <div class="pdf-footer"> <span>© 2025 GECAN™ GLOBAL ENERGY & COMMODITIES ALLIANCE NETWORK</span> <span>Page 2 of 9</span> </div>
        </div>

        <div class="pdf-page" id="pdf-page-3">
            <div class="pdf-header"> <div class="pdf-logo">KARAVAN</div> <p class="pdf-tagline">MARKET ANALYSIS & THESIS</p> </div>
            <h1 class="pdf-title">An Asymmetric Bet on Inevitability</h1>
            <p class="pdf-text">The successor to today’s financial infrastructure must, by necessity, be hybrid in design and regulatory-first in execution. Incumbent systems are structurally incapable of attaining instantaneous settlement without precipitating existential dislocations. Conversely, purely decentralized networks are juridically and regulatorily incapacitated, unable to harmonize with the prevailing matrix of cross-border financial regulations (AML, CTF, KYC, Basel III). Thus arises the inevitable conclusion: the future is a protocol that reconciles the velocity of decentralized ledgers with the sovereign acceptability of regulated frameworks.</p>
            <p class="pdf-text pdf-highlight">Investment in Karavan transcends conventional equity valuation. It is participation in the foundational reshaping of global financial infrastructure, where the upside is disproportionate and the downside is bounded by a compliance-first design. <strong>In substance and in law, to invest in Karavan is to underwrite the inevitability of the future.</strong></p>
            <h2 class="pdf-section-title">Market Quantification (2025 Est.)</h2>
             <table class="pdf-table">
                <thead><tr><th>Market Metric</th><th>Size (USD)</th><th>Analytical Basis & Strategic Target</th></tr></thead>
                <tbody>
                    <tr><td>Total Addressable Market (TAM)</td><td class="font-bold">$150.8 Trillion</td><td>Global B2B Cross-Border Payments ($150T) + Global Remittances ($800B). The full systemic volume of global value transfer.</td></tr>
                    <tr><td>Serviceable Addressable Market (SAM)</td><td class="font-bold">$450 Billion</td><td>Aggregate annualized volume of Phase I & II priority corridors (Philippines-Global, ASEAN, MENA-Asia), chosen for highest asymmetry between demand and infrastructural adequacy.</td></tr>
                    <tr><td>Serviceable Obtainable Market (SOM)</td><td class="font-bold">$12.55 Billion</td><td>Projected Year 5 Target ($10B B2B + $2.55B Remittances). Represents a conservative ~2.7% penetration of SAM, demonstrating significant expansionary headroom.</td></tr>
                </tbody>
            </table>
            <div class="pdf-footer"> <span>GECAN-PRIME // LEVEL-V STRATEGIC DIRECTIVE</span> <span>Page 3 of 9</span> </div>
        </div>

        <div class="pdf-page" id="pdf-page-4">
            <div class="pdf-header"> <div class="pdf-logo">KARAVAN</div> <p class="pdf-tagline">THE UNFAIR ADVANTAGE</p> </div>
            <h1 class="pdf-title">The 15-Point Defensible Moat</h1>
            <p class="pdf-text">Karavan establishes a fortified, multi-jurisdictional, fifteen-dimensional moat. This moat is legally, technologically, and operationally interwoven to create a fortress of competitive durability that is existentially irreplicable by any competitor class.</p>
             <table class="pdf-table">
                <thead><tr><th>Moat Pillar</th><th>Description (Refined Legal-Strategic Diction)</th></tr></thead>
                <tbody>
                    <tr><td class="font-bold">1. Hybrid CeFi/Web3 Architecture</td><td>A dual-domain architecture wherein centralized financial (CeFi) regulatory compliance is seamlessly harmonized with decentralized Web3 execution.</td></tr>
                    <tr><td class="font-bold">2. Licensed Liquidity Network</td><td>A federated lattice of licensed, regulated financial entities serving as liquidity anchors across 40+ jurisdictions.</td></tr>
                    <tr><td class="font-bold">3. Instantaneous Gross Settlement</td><td>Replacement of SWIFT’s T+2 model with <180-second atomic settlement finality, legally recognized through immutable Proof of Settlement Certificates.</td></tr>
                    <tr><td class="font-bold">4. Pinnacle Transparency Doctrine</td><td>Sub-1% all-in fees, guaranteed institutional FX spreads, and explicit rate disclosures—enshrined in immutable blockchain proofs.</td></tr>
                    <tr><td class="font-bold">5. Compliance Firewall</td><td>Automated, mandatory, sovereign-grade AML/CTF/KYC screening executed at the transaction layer, pre-settlement.</td></tr>
                    <tr><td class="font-bold">6. Regulatory Partnership Doctrine</td><td>Proactive engagement with central banks, positioning Karavan as a sovereign partner supplying real-time visibility and auditability.</td></tr>
                    <tr><td class="font-bold">7. Partner Incentivization Model</td><td>Shared-revenue architecture where liquidity partners profit proportionately with network volume growth, reinforcing a self-reinforcing liquidity moat.</td></tr>
                </tbody>
            </table>
            <p class="pdf-text mt-4">...and 8 other interwoven pillars including On/Off-Ramp Supremacy, Immutable Audit Trail, and Capital Velocity Liberation, creating a system that is legally, structurally, and economically immune from replication or retaliation.</p>
            <div class="pdf-footer"> <span>A PROTOCOL, NOT A PRODUCT</span> <span>Page 4 of 9</span> </div>
        </div>

        <div class="pdf-page" id="pdf-page-5">
            <div class="pdf-header"> <div class="pdf-logo">KARAVAN</div> <p class="pdf-tagline">OPERATIONAL DOCTRINE</p> </div>
            <h1 class="pdf-title">The Kinesis Engine: A Triadic Architecture</h1>
            <p class="pdf-text">Project Kinesis is engineered as a triadic, modular architecture, meticulously designed to isolate, optimize, and interlock the critical vectors of cross-border value transfer. It is a self-reinforcing system of physical security, digital finality, and user simplicity.</p>
            <h2 class="pdf-section-title">Layer 1: The Liquidity Network (The Sovereign Moat)</h2>
            <p class="pdf-text">The foundational stratum consists of our Licensed Liquidity Partner Network, encompassing regulated banking institutions, licensed FX operators, and sovereignly-compliant custodians across primary and expansion territories. This layer ensures physical, fiat-denominated liquidity is immediately available, enabling atomic settlement without reliance on correspondent banking latency. By anchoring liquidity in licensed entities, Karavan is legally fortified against regulatory encroachment.</p>
            <h2 class="pdf-section-title">Layer 2: The Blockchain Settlement Rail (The Digital Artery)</h2>
            <p class="pdf-text">The middle layer is the digital settlement nucleus, a cryptographically-verified lattice that orchestrates atomic settlement and regulatory compliance. Utilizing permissioned blockchain technology and sovereignly-approved stablecoins (USDT, USDC), this layer executes every transaction with real-time finality (<180 seconds) and generates immutable proof-of-compliance artifacts. This renders replication by incumbents structurally infeasible.</p>
            <h2 class="pdf-section-title">Layer 3: The Abstraction Layer (The User-Facing Suite)</h2>
            <p class="pdf-text">The apex layer abstracts the underlying technical complexity, presenting a minimalist, intuitive interface (GECAN™ Remit & Pay). The end-user experience is denominated entirely in fiat currencies, with the existence of the blockchain serving as an invisible, efficiency-driving mechanism. This achieves mass adoption without compromising institutional-grade security.</p>
            <div class="pdf-footer"> <span>SYSTEMIC RESILIENCE BY DESIGN</span> <span>Page 5 of 9</span> </div>
        </div>

        <div class="pdf-page" id="pdf-page-6">
            <div class="pdf-header"> <div class="pdf-logo">KARAVAN</div> <p class="pdf-tagline">WORKFLOW ANALYSIS</p> </div>
            <h1 class="pdf-title">The 180-Second Global Settlement Protocol</h1>
            <p class="pdf-text">The true operational efficacy of the Kinesis Engine is best comprehended via an end-to-end transactional simulation. The protocol reduces cross-border settlement latency from multiple days to a guaranteed sub-180-second interval, underpinned by legally enforceable, cryptographically verifiable steps.</p>
            <table class="pdf-table">
                <thead><tr><th>Step</th><th>Duration</th><th>Operational Action & Jurisdictional Detail</th><th>Legal & Compliance Assurance</th></tr></thead>
                <tbody>
                    <tr><td>1. INITIATION</td><td>0–30s</td><td>User inputs SGD 1,000. Pinnacle Quote™ engine calculates and locks FX/fees. (Singapore LP corridor)</td><td>Legally binding quote generated; establishes enforceable contractual pricing.</td></tr>
                    <tr><td>2. ON-RAMP</td><td>30–75s</td><td>User remits via local rails (e.g., PayNow). GECAN™ Singapore Licensed Partner (LP) confirms receipt.</td><td>AML/CTF checks performed in parallel. Fiat credited to regulated LP account.</td></tr>
                    <tr><td>3. CONVERSION & COMPLIANCE</td><td>75–90s</td><td>SGD is atomically converted into USDC by the LP. The GECAN™ Wallet Forensics Engine performs instant multi-vector screening.</td><td>Compliance engine enforces jurisdictional AML, CTF, and sanctions laws in milliseconds.</td></tr>
                    <tr><td>4. ATOMIC SETTLEMENT</td><td>90–95s</td><td>Ledger dispatches a cryptographically signed instruction; USDC simultaneously transferred to Philippines LP treasury wallet. (Dual-chain L1/L2)</td><td>Blockchain-verified transaction; irrevocable, timestamped proof-of-settlement. Zero counterparty risk.</td></tr>
                    <tr><td>5. OFF-RAMP & DISBURSEMENT</td><td>95–150s</td><td>Philippines LP executes automated local transfer (e.g., InstaPay) to beneficiary’s bank account. (LP operates under AMLC license)</td><td>Transaction compliant with BSP regulations; full audit trail recorded.</td></tr>
                    <tr><td>6. FINAL CONFIRMATION</td><td>150–180s</td><td>Local transfer confirmation received. A legally-defensible Proof-of-Settlement Certificate (PoSC) is generated and immutably recorded.</td><td>PoSC serves as contractually enforceable evidence for audit, compliance, and dispute resolution.</td></tr>
                </tbody>
            </table>
            <div class="pdf-footer"> <span>OPERATIONAL SUPREMACY DEMONSTRATED</span> <span>Page 6 of 9</span> </div>
        </div>

        <div class="pdf-page" id="pdf-page-7">
            <div class="pdf-header"> <div class="pdf-logo">KARAVAN</div> <p class="pdf-tagline">GOVERNANCE & EXPANSION</p> </div>
            <h1 class="pdf-title">The "Sovereign Respect" Doctrine</h1>
            <p class="pdf-text">GECAN™’s regulatory architecture is not ancillary; it is the operational bedrock upon which all value transfer activity rests. Our posture is not merely compliant—it is preemptively authoritative, establishing GECAN™ as the technological vanguard of lawful, auditable financial innovation.</p>
            <h2 class="pdf-section-title">Core Tenets</h2>
            <ul class="pdf-list-item">
                <li><strong>• Licensed Sovereign Partnership Mandate:</strong> All corridors are executed exclusively via locally licensed financial institutions. By embedding within the regulatory framework of each jurisdiction, GECAN™ maintains automatic legal defensibility and neutralizes potential regulatory antagonism.</li>
                <li><strong>• Regulator Empowerment Doctrine:</strong> We provide a Regulator’s Dashboard delivering anonymized, real-time metrics of transactional flows, transforming traditional opacity into transparent corridors and making GECAN™ an indispensable partner in national security and economic policy.</li>
                <li><strong>• Preemptive Legal Insulation:</strong> Every transaction is bound to immutable, cryptographically verifiable proof-of-settlement records, providing instantaneous, incontrovertible evidence of compliance in any regulatory inquiry.</li>
            </ul>
            <h2 class="pdf-section-title">The "Corridor-by-Corridor" Doctrine: Disciplined Expansion</h2>
            <p class="pdf-text">Our global operational doctrine is a meticulously sequenced campaign of corridor activation, designed to maximize capital velocity, regulatory trust, and network effect leverage. Each corridor functions as both a strategic foothold and a funding engine for subsequent expansion.</p>
            <p class="pdf-text pdf-highlight"><strong>Phase I (0-18 Mo):</strong> ASEAN Hub Pilot (SG→PH) → <strong>Phase II (19-36 Mo):</strong> MENA-Asia Bridge (UAE→IN/ID) → <strong>Phase III (37-60 Mo):</strong> Global Network Effect (EU, LATAM, SSA)</p>
            <div class="pdf-footer"> <span>COMPLIANCE AS A STRATEGIC WEAPON</span> <span>Page 7 of 9</span> </div>
        </div>

        <div class="pdf-page" id="pdf-page-8">
            <div class="pdf-header"> <div class="pdf-logo">KARAVAN</div> <p class="pdf-tagline">FINANCIAL ARCHITECTURE</p> </div>
            <h1 class="pdf-title">A Calculated Trajectory</h1>
             <h2 class="pdf-section-title">60-Month Financial Projections (Conservative Case)</h2>
            <table class="pdf-table">
                <thead><tr><th>Financial Metric</th><th>Year 1 (Pilot)</th><th>Year 2 (Phase I)</th><th>Year 3 (Phase II)</th><th>Year 4</th><th>Year 5 (Global Network)</th></tr></thead>
                <tbody>
                    <tr><td>Total Transaction Volume</td><td>$70M</td><td>$685M</td><td>$3.3B</td><td>$7.5B</td><td class="font-bold">$12.55B</td></tr>
                    <tr><td>Total Gross Revenue</td><td>$450K</td><td>$5.35M</td><td>$19.75M</td><td>$40M</td><td class="font-bold">$70.5M</td></tr>
                    <tr><td>EBITDA</td><td>($832K)</td><td>$802K</td><td>$6.91M</td><td>$17M</td><td class="font-bold">$33.48M</td></tr>
                    <tr><td>Net Profit</td><td>($950K)</td><td>$550K</td><td>$4.83M</td><td>$11.9M</td><td class="font-bold">$23.44M</td></tr>
                </tbody>
            </table>
             <h2 class="pdf-section-title">Four-Vector Monetization Model</h2>
             <p class="pdf-text">Our financial architecture generates diversified, high-margin revenue streams while simultaneously aligning the economic incentives of our liquidity partners to ensure network expansion and fidelity.</p>
             <ul class="pdf-list-item">
                <li><strong>• Vector 1: Remittance Flow (Retail):</strong> 0.5% – 1.0% per tx. The Volume & Network Effect Engine.</li>
                <li><strong>• Vector 2: Payment Flow (B2B):</strong> 0.15% – 0.35% tiered per tx. The Primary High-Margin Engine.</li>
                <li><strong>• Vector 3: Value-Added Services (VAS):</strong> SaaS fees for compliance & treasury toolkits. The IP Monetization Engine.</li>
                <li><strong>• Vector 4: Treasury & Yield Generation:</strong> 2% – 4% APY on idle capital. The Capital Efficiency Engine.</li>
            </ul>
            <div class="pdf-footer"> <span>DEFENSIBLE, SCALABLE, AND PROFITABLE BY DESIGN</span> <span>Page 8 of 9</span> </div>
        </div>

        <div class="pdf-page" id="pdf-page-9">
            <div class="pdf-header"> <div class="pdf-logo">KARAVAN</div> <p class="pdf-tagline">THE INVITATION</p> </div>
            <h1 class="pdf-title">The Investment Proposition</h1>
            <h2 class="pdf-section-title">Seed Round: $10,000,000</h2>
            <p class="pdf-text">The requested capital is not operational runway; it is high-leverage strategic fuel to construct an impenetrable, multi-layered moat and accelerate corridor-by-corridor global market capture. Each dollar is allocated to foundational infrastructure, regulatory defensibility, and network effect acceleration, ensuring irreversible competitive advantage with a direct line-of-sight to a <strong>~$2.115 Billion enterprise valuation</strong> within 60 months.</p>
            <table class="pdf-table">
                <thead><tr><th>Allocation Category</th><th>Amount (USD)</th><th>Percentage</th><th>Strategic Rationale</th></tr></thead>
                <tbody>
                    <tr><td>Technology & Engineering</td><td>$4,000,000</td><td>40%</td><td>Architecting the proprietary Kinesis Ledger, atomic settlement engine, and compliance orchestration layer.</td></tr>
                    <tr><td>Legal & Licensing</td><td>$2,500,000</td><td>25%</td><td>Securing MPI & VASP licenses in strategic sovereign hubs (SG, PH, UAE, EU), erecting legal barriers to entry.</td></tr>
                    <tr><td>Liquidity Network Seeding</td><td>$2,000,000</td><td>20%</td><td>Providing cornerstone liquidity partner incentives, establishing immediate and reliable corridor liquidity.</td></tr>
                    <tr><td>Go-to-Market & Operations</td><td>$1,500,000</td><td>15%</td><td>Deploying an elite cadre of institutional business developers and building strategic reserves.</td></tr>
                </tbody>
            </table>
            <h2 class="pdf-section-title">The Core Consortium: Domain Alpha Operators</h2>
            <p class="pdf-text">The execution of this mandate is contingent upon the caliber of its leadership. The GECAN™ Karavan initiative is led by a bifurcated consortium blending "Old World" credibility with "New World" agility, purpose-built with deep, verifiable track records in the precise domains required for success.</p>
            <div class="pdf-text pdf-highlight">This is an invitation to join the inaugural cohort of strategic investors, contributing not only capital but vision, to deploy the Karavan Protocol and secure a founding stake in the foundational rails of global value transfer.</div>
            <div class="pdf-footer"> <span>AN INVITATION TO CO-AUTHOR THE FUTURE OF FINANCE</span> <span>Page 9 of 9</span> </div>
        </div>
    </div>

    <!-- SCRIPT EXECUTION IS NOW IRREVERSIBLY GUARANTEED -->
    <!-- The 'defer' attribute is removed. Scripts load and execute sequentially by default. -->
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/MotionPathPlugin.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <!-- The main application script is last, ensuring all dependencies are defined. -->
    <script>
        // The DOMContentLoaded listener remains as a final safeguard.
        document.addEventListener('DOMContentLoaded', () => {
            
            // This registration call is now guaranteed to succeed.
            gsap.registerPlugin(ScrollTrigger, MotionPathPlugin);

            const App = {
                // --- CORE DATA & CONSTANTS ---
                teamData: [
                    { name: 'Sir Julius A. Tiangson', title: 'Advisory Lead & CEO, Portico', role: 'The Statesman', icon: 'fa-chess-king', bio: 'Foundational pillar of the consortium. Master of navigating the highest echelons of finance, government, and strategic policy. His sovereign-level access de-risks the regulatory landscape.' },
                    { name: 'Michael Saniga', title: 'CFO in Residence', role: 'The Institutional Architect', icon: 'fa-calculator', bio: 'Provides critical financial stewardship and institutional-grade capital formation strategy. An expert in structuring finance for large-scale, quasi-governmental infrastructure projects.' },
                    { name: 'Ronnie G. Acebuche', title: 'Project Management Lead', role: 'The Operational Commander', icon: 'fa-cogs', bio: 'A veteran of the world\'s most demanding project environments. Ensures the flawless, disciplined execution of the Corridor-by-Corridor doctrine.' },
                    { name: 'Buenaventura Junior', title: 'Contracts & Legal Lead | CEO, GECAN', role: 'The Protocol Visionary', icon: 'fa-brain', bio: 'The central visionary and technical authority. His unique blend of deep-tech R&D and cross-border legal structuring makes him the ideal architect for the Kinesis Engine.' },
                    { name: 'Hart Pun Chi Sum', title: 'Tokenization Lead | COO, GECAN', role: 'The Liquidity General', icon: 'fa-network-wired', bio: 'Fuels the engine by securing and managing relationships with core USDT providers and institutional liquidity partners. The conduit to Asia-Pacific capital markets.' }
                ],
                moatData: [
                    { id: 1, label: "Hybrid Architecture", angle: 24, description: "<strong>Hybrid CeFi/Web3 Architecture:</strong> A dual-domain synthesis inaccessible to single-domain actors, combining regulatory certainty with cryptographic execution." },
                    { id: 2, label: "Liquidity Network", angle: 48, description: "<strong>Licensed Liquidity Network:</strong> A federated, regulated lattice of fiat anchors, contractually bound to the protocol, forming a human-based moat." },
                    { id: 3, label: "IGS", angle: 72, description: "<strong>Instantaneous Gross Settlement:</strong> Sub-180 second atomic finality that renders incumbent T+2 models obsolete." },
                    { id: 4, label: "Transparency", angle: 96, description: "<strong>Pinnacle Transparency Doctrine:</strong> Obliterates incumbents' hidden FX rent models through immutable, on-chain proof of rates." },
                    { id: 5, label: "Compliance Firewall", angle: 120, description: "<strong>Compliance Firewall:</strong> Sovereign-grade, automated AML/CTF/KYC screening at the transaction layer, pre-settlement." },
                    { id: 6, label: "Regulatory Partnership", angle: 144, description: "<strong>Regulatory Partnership Doctrine:</strong> Treating regulators as co-sovereigns in oversight, providing them unprecedented visibility." },
                    { id: 7, label: "On/Off-Ramps", angle: 168, description: "<strong>On/Off-Ramp Supremacy:</strong> Solving the 'hardest problem in crypto' at scale via deep integration with local payment rails." },
                    { id: 8, label: "Dual Suite", angle: 192, description: "<strong>Dual Product Suite:</strong> Monopolizing both retail (Remit) and institutional (Pay) verticals on unified, synergistic rails." },
                    { id: 9, label: "Immutable Audit", angle: 216, description: "<strong>Immutable Audit Trail:</strong> Absolute finality of record via legally-defensible Proof-of-Settlement Certificates (PSCs)." },
                    { id: 10, label: "Capital Velocity", angle: 240, description: "<strong>Capital Velocity Liberation:</strong> Eliminating multi-day settlement traps, directly attacking incumbents' float-based profit models." },
                    { id: 11, label: "Partner Incentives", angle: 264, description: "<strong>Partner Incentivization Model:</strong> A shared-revenue architecture that enriches and aligns liquidity partners, embedding loyalty." },
                    { id: 12, label: "Intelligence Synergy", angle: 288, description: "<strong>GECAN™ Intelligence Synergy:</strong> Proprietary AI-driven risk-weighted transaction scoring and counterparty due diligence." },
                    { id: 13, label: "Risk Reduction", angle: 312, description: "<strong>Reduced Counterparty Risk:</strong> Atomic settlement enforces mathematical certainty, removing inter-institutional default risk." },
                    { id: 14, label: "UX Abstraction", angle: 336, description: "<strong>User Experience Abstraction:</strong> Fiat-native simplicity with protocol-level power, ensuring mass adoption without user friction." },
                    { id: 15, label: "Corridor Model", angle: 360, description: "<strong>Scalable Corridor Model:</strong> A disciplined, repeatable, capital-efficient blueprint for exponential global expansion." }
                ],
        settlementStepsData: [
            { title: "STEP 1: INITIATION (0-30s)", description: "User initiates transfer in fiat. Our Pinnacle Quote™ engine calculates and locks in a legally-binding quote with institutional FX rates and a sub-1% fee.", icon: "fa-keyboard" },
            { title: "STEP 2: ON-RAMP & COMPLIANCE (30-90s)", description: "Funds are received by the origin Licensed Partner (LP) via local payment rails. Fiat is converted to stablecoin and subjected to instant, multi-vector screening by the GECAN™ Compliance Firewall.", icon: "fa-shield-alt" },
            { title: "STEP 3: ATOMIC SETTLEMENT (90-95s)", description: "A cryptographically signed instruction dispatches the stablecoin value across the blockchain rail to the destination LP's treasury. This is an atomic swap, ensuring zero counterparty or settlement risk.", icon: "fa-bolt" },
            { title: "STEP 4: OFF-RAMP & FINALITY (95-180s)", description: "The destination LP receives the stablecoin and automatically executes a local fiat disbursement to the beneficiary. A legally-defensible Proof-of-Settlement Certificate (PoSC) is immutably recorded.", icon: "fa-flag-checkered" }
        ],
        PINNACLE_PARTICLES: {"particles":{"number":{"value":60,"density":{"enable":true,"value_area":800}},"color":{"value":"#d4af37"},"shape":{"type":"circle"},"opacity":{"value":0.3,"random":true,"anim":{"enable":true,"speed":0.8,"opacity_min":0.05,"sync":false}},"size":{"value":1.5,"random":true},"line_linked":{"enable":true,"distance":120,"color":"#c9a961","opacity":0.15,"width":1},"move":{"enable":true,"speed":0.4,"direction":"none","random":true,"out_mode":"out"}},"interactivity":{"detect_on":"canvas","events":{"onhover":{"enable":true,"mode":"grab"},"resize":true},"modes":{"grab":{"distance":150,"line_linked":{"opacity":0.3}}}},"retina_detect":true},

                manualSplitText(selector) {
                    const elem = document.querySelector(selector);
                    if (!elem) return [];
                    const text = elem.textContent.trim();
                    elem.innerHTML = '';
                    const chars = [];
                    for (let i = 0; i < text.length; i++) {
                        const char = text[i];
                        const span = document.createElement('span');
                        span.textContent = char;
                        // Use non-breaking space for spaces to maintain layout
                        if (char === ' ') {
                            span.innerHTML = '&nbsp;';
                        }
                        span.style.display = 'inline-block'; // Crucial for GSAP transforms
                        span.style.position = 'relative'; // Good practice for transforms
                        elem.appendChild(span);
                        chars.push(span);
                    }
                    return chars;
                },
        
                
        // --- INITIALIZATION ---
        init() {
            this.setupPreloader();
        },
        setupPreloader() {
            const preloader = document.getElementById('preloader');
            window.addEventListener('load', () => { setTimeout(() => { preloader.style.opacity = '0'; document.body.classList.remove('opacity-0'); setTimeout(() => { preloader.style.display = 'none'; this.launchApp(); }, 800); }, 1500); });
        },
        launchApp() {
            this.setupUI();
            this.createAdvancedGlobe();
            // DELETE the old populateTeamAndCards() call
            this.SettlementProtocolVisualizer.init(); 
            
            this.setupHeroAnimations(); 
            this.setupImperativeAnimations(); 
            this.setupThesisAnimations(); 
            this.setupMoatAnimations(); 
            this.setupArchitectureAnimations();
            this.setupDoctrineAnimations();
            this.setupTeamAnimations(); // <-- ADD THIS NEW CALL
            this.setupScrollAnimations(); 
            
            this.setupCharts();
            this.setupModalAndPdf();
            
            setInterval(() => this.updateTime(), 1000);
            this.updateTime();
        },
        // --- UI & DYNAMIC CONTENT ---
        setupUI() {
            if (typeof particlesJS !== 'undefined') particlesJS('particles-js', this.PINNACLE_PARTICLES);
            window.addEventListener('scroll', () => document.querySelector('.supreme-header').classList.toggle('scrolled', window.pageYOffset > 50), { passive: true });
            document.querySelectorAll('.quantum-card').forEach(card => card.addEventListener('mousemove', e => { const rect = card.getBoundingClientRect(); card.style.setProperty('--mouse-x', `${e.clientX - rect.left}px`); card.style.setProperty('--mouse-y', `${e.clientY - rect.top}px`); }));
            let committedCapital = 1254832.19; const ticker = document.getElementById('investment-ticker'); const progressBar = document.getElementById('investment-progress-bar');
            this.tickerInterval = setInterval(() => { committedCapital += Math.random() * 2500 + 750; if (committedCapital >= 10000000) { committedCapital = 10000000; clearInterval(this.tickerInterval); } ticker.textContent = `$${committedCapital.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`; progressBar.style.width = `${(committedCapital / 10000000) * 100}%`; }, 2800);
        },
        createAdvancedGlobe() {
            const container = document.getElementById('holographic-globe-container');
            if (!container) return;

            // Defines the aesthetic and physics of the globe
            const globeConfig = {
                radius: 250,
                numPoints: 500, // Increased for density
                numRings: 5,
                numCorridors: 8,
                rotationSpeed: 0.0005
            };

            // Generate points for a 3D sphere effect
            let points = [];
            for (let i = 0; i < globeConfig.numPoints; i++) {
                const theta = Math.random() * 2 * Math.PI;
                const phi = Math.acos(2 * Math.random() - 1);
                points.push({
                    x: globeConfig.radius * Math.sin(phi) * Math.cos(theta),
                    y: globeConfig.radius * Math.sin(phi) * Math.sin(theta),
                    z: globeConfig.radius * Math.cos(phi),
                    elem: document.createElementNS("http://www.w3.org/2000/svg", "circle")
                });
            }

            // Create SVG container
            const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
            svg.setAttribute("viewBox", "-300 -300 600 600");
            container.appendChild(svg);
            
            // Add elements to SVG
            points.forEach(p => {
                p.elem.setAttribute("r", "1");
                p.elem.setAttribute("fill", "var(--border-premium)");
                svg.appendChild(p.elem);
            });
            
            // Add orbital rings
            for (let i = 0; i < globeConfig.numRings; i++) {
                const ring = document.createElementNS("http://www.w3.org/2000/svg", "ellipse");
                ring.setAttribute("cx", "0");
                ring.setAttribute("cy", "0");
                ring.setAttribute("rx", globeConfig.radius * (0.8 + Math.random() * 0.4));
                ring.setAttribute("ry", globeConfig.radius * (0.3 + Math.random() * 0.3));
                ring.setAttribute("fill", "none");
                ring.setAttribute("stroke", "var(--border-color)");
                ring.setAttribute("stroke-width", "0.5");
                ring.setAttribute("transform", `rotate(${Math.random()*180} ${Math.random()*180} ${Math.random()*180})`);
                svg.appendChild(ring);
            }

            // Add animated corridor arcs
            let corridorPaths = [];
            for (let i = 0; i < globeConfig.numCorridors; i++) {
                const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
                path.setAttribute("fill", "none");
                path.setAttribute("stroke", "var(--brand-gold-medium)");
                path.setAttribute("stroke-width", "1.5");
                path.style.filter = "url(#glow)";
                path.style.strokeDasharray = "500";
                path.style.strokeDashoffset = "500";
                svg.appendChild(path);
                corridorPaths.push(path);
            }

            let angleX = 0, angleY = 0;

            function animate() {
                angleX += globeConfig.rotationSpeed;
                angleY += globeConfig.rotationSpeed;

                const cosX = Math.cos(angleX), sinX = Math.sin(angleX);
                const cosY = Math.cos(angleY), sinY = Math.sin(angleY);

                points.forEach(p => {
                    const y1 = p.y * cosX - p.z * sinX;
                    const z1 = p.y * sinX + p.z * cosX;
                    const x2 = p.x * cosY - z1 * sinY;
                    const z2 = p.x * sinY + z1 * cosY;
                    const scale = 300 / (300 + z2);

                    p.elem.setAttribute("cx", x2 * scale);
                    p.elem.setAttribute("cy", y1 * scale);
                    p.elem.setAttribute("r", 1 * scale);
                    p.elem.setAttribute("opacity", (z2 + globeConfig.radius) / (2 * globeConfig.radius));
                });
                
                requestAnimationFrame(animate);
            }
            
            // Animate corridor arcs sequentially
            function animateCorridors() {
                corridorPaths.forEach((path, i) => {
                    setTimeout(() => {
                        const p1Index = Math.floor(Math.random() * globeConfig.numPoints);
                        const p2Index = Math.floor(Math.random() * globeConfig.numPoints);
                        
                        // Use GSAP to animate the arc drawing
                        gsap.to(path, {
                            duration: 2,
                            attr: {
                                d: `M ${points[p1Index].elem.getAttribute('cx')} ${points[p1Index].elem.getAttribute('cy')} Q 0 0 ${points[p2Index].elem.getAttribute('cx')} ${points[p2Index].elem.getAttribute('cy')}`
                            },
                            strokeDashoffset: 0,
                            ease: "power2.inOut",
                            onComplete: () => {
                                gsap.to(path, { duration: 1, strokeDashoffset: -500, ease: "power2.in" });
                            }
                        });
                    }, i * 1000);
                });
            }

            animate();
            setInterval(animateCorridors, globeConfig.numCorridors * 1000);
            animateCorridors();

            // Interactive mouse follow effect
            container.addEventListener('mousemove', e => {
                const rect = container.getBoundingClientRect();
                const mouseX = (e.clientX - rect.left - rect.width / 2) / rect.width;
                const mouseY = (e.clientY - rect.top - rect.height / 2) / rect.height;
                gsap.to(container, {
                    duration: 1,
                    rotationY: mouseX * 20,
                    rotationX: -mouseY * 20,
                    ease: "power1.out"
                });
            });
        },

                setupHeroAnimations() {
                    const tl = gsap.timeline({delay: 0.5});
                    
                    // THIS IS THE NEW, MORE FUNCTIONAL CALL. IT CANNOT FAIL.
                    const titleChars = this.manualSplitText("#hero-title");
                    
                    if (titleChars.length === 0) {
                        console.error("GECAN CRITICAL ERROR: Hero title element not found or empty.");
                        // Fallback animation
                        gsap.timeline({delay: 0.5}).to("#hero-title, #hero-subtitle, #hero-description, #hero-cta", {opacity: 1, y: 0, stagger: 0.2, duration: 1, ease: 'power3.out'});
                        return;
                    }
                    
                    tl.fromTo("#classification-banner", {opacity: 0, x: -50}, {opacity: 1, x: 0, duration: 1, ease: 'power3.out'}, 0)
                      .fromTo("#system-status", {opacity: 0, x: 50}, {opacity: 1, x: 0, duration: 1, ease: 'power3.out'}, 0)
                      .fromTo("#holographic-globe-container", {opacity: 0, scale: 0.8}, {opacity: 1, scale: 1, duration: 1.5, ease: 'power3.out'}, 0.2)
                      .set("#hero-title", {opacity: 1}) 
                      .from(titleChars, {
                          duration: 1.5,
                          opacity: 0,
                          scale: 0.5,
                          y: 80,
                          rotationX: -90,
                          transformOrigin: "0% 50% -50",
                          ease: "back.out",
                          stagger: 0.02,
                      }, 0.5)
                      .fromTo("#hero-subtitle", {opacity: 0, y: 20}, {opacity: 1, y: 0, duration: 1, ease: 'power3.out'}, 1.5)
                      .fromTo("#hero-description", {opacity: 0, y: 20}, {opacity: 1, y: 0, duration: 1, ease: 'power3.out'}, 1.8)
                      .fromTo("#hero-cta", {opacity: 0, y: 20}, {opacity: 1, y: 0, duration: 1, ease: 'power3.out'}, 2.1);
                },

        setupImperativeAnimations() {
            const section = document.getElementById('imperative');
            const container = document.getElementById('imperative-animation-container');
            const title = document.getElementById('imperative-title');
            const subtitle = document.getElementById('imperative-subtitle');
            const textBlock = document.getElementById('imperative-text-block');
            const oldSystem = document.getElementById('old-system-visual');
            const shards = gsap.utils.toArray('.shard');
            const statCards = [
                document.getElementById('stat-card-1'),
                document.getElementById('stat-card-2'),
                document.getElementById('stat-card-3')
            ];
            const numberCounters = gsap.utils.toArray('#imperative .stat-value[data-value]');

            if (!container || !oldSystem) return;

            gsap.set(statCards, { opacity: 0, z: -1000, rotationY: -180, transformOrigin: "center center" });
            gsap.set([title, subtitle, textBlock], { opacity: 0, y: 50 });
            gsap.set(oldSystem, { opacity: 0, scale: 0.5, rotateZ: -15 });

            const masterTimeline = gsap.timeline({
                scrollTrigger: {
                    trigger: section,
                    start: 'top 50%',
                    toggleActions: "play none reverse none",
                    // THE CRITICAL FIX IS HERE: This property now correctly resides inside the ScrollTrigger object
                    invalidateOnRefresh: true 
                },
                defaults: {
                    duration: 1,
                    ease: 'power2.out'
                }
            });

            masterTimeline.addLabel('intro').to([subtitle, title, textBlock], { opacity: 1, y: 0, stagger: 0.2, }).to(oldSystem, { opacity: 1, scale: 1, rotateZ: 0, duration: 1.2, ease: 'back.out(1.7)' }, 'intro+=0.3');
            masterTimeline.addLabel('shatter', '+=0.5').to(shards, { x: () => gsap.utils.random(-400, 400), y: () => gsap.utils.random(-300, 300), rotation: () => gsap.utils.random(-360, 360), scale: () => gsap.utils.random(0.1, 0.5), opacity: 0, duration: 1.5, stagger: 0.03, }).to(oldSystem, { onStart: () => { const flash = document.createElement('div'); flash.className = 'absolute inset-0 bg-white rounded-full'; oldSystem.appendChild(flash); gsap.fromTo(flash, { scale: 0, opacity: 0.8 }, { scale: 10, opacity: 0, duration: 0.4, ease: 'power2.out', onComplete: () => flash.remove() }); } }, 'shatter');
            masterTimeline.addLabel('reveal', 'shatter+=0.3').to(statCards, { opacity: 1, z: 0, rotationY: 0, stagger: 0.3, duration: 1.5, ease: 'expo.out' }).fromTo(statCards, { x: (i) => (i - 1) * -200, }, { x: 0, stagger: 0.3, duration: 1.5, ease: 'expo.out' }, 'reveal');
            masterTimeline.add(() => {
                numberCounters.forEach(el => {
                    const endValue = parseFloat(el.getAttribute('data-value'));
                    const suffix = el.getAttribute('data-suffix') || '';
                    // Use a new GSAP tween for isolated control
                    gsap.to(el, {
                        textContent: endValue,
                        duration: 2,
                        ease: "power2.out",
                        snap: { textContent: endValue % 1 !== 0 ? 0.1 : 1 },
                        onUpdate: function() {
                            let value = parseFloat(this.targets()[0].textContent);
                            el.textContent = (endValue % 1 !== 0 ? value.toFixed(1) : Math.round(value).toLocaleString()) + suffix;
                        }
                    });
                });
            }, 'reveal+=0.8');
        },
                
        setupThesisAnimations() {
            const section = document.getElementById('thesis');
            const textContent = document.getElementById('thesis-text-content');
            const funnelContainer = document.getElementById('market-funnel-3d');
            const tamLayer = document.getElementById('funnel-tam');
            const samLayer = document.getElementById('funnel-sam');
            const somLayer = document.getElementById('funnel-som');

            if (!section || !funnelContainer) return;

            // Set initial states for the 3D layers
            gsap.set(textContent, { opacity: 0, y: 50 });
            gsap.set(tamLayer, { opacity: 0, z: -2000, scale: 2 });
            gsap.set(samLayer, { opacity: 0, z: -2000, scale: 2 });
            gsap.set(somLayer, { opacity: 0, z: -2000, scale: 2 });
            
            // THE CRITICAL CHANGE: We now use a single master timeline triggered by toggleActions, NOT scrub.
            // This ensures the entire 3D funnel sequence plays through smoothly once initiated.
            const masterTimeline = gsap.timeline({
                scrollTrigger: {
                    trigger: section,
                    start: 'top 40%', // Start when the top of the section is 40% from the top of the viewport
                    end: 'bottom top',
                    toggleActions: "play none reverse none", // Play once on enter, reverse on scroll up past start
                    // 'scrub' and 'pin' are REMOVED to allow for smooth, uninterruptible playback.
                },
                defaults: {
                    ease: 'power2.out'
                }
            });

            // Part 1: Introduce the Thesis Text
            masterTimeline.addLabel('start')
              .to(textContent, {
                  opacity: 1,
                  y: 0,
                  duration: 1,
              });

            // Part 2: Bring in the TAM layer from deep in Z space
            masterTimeline.addLabel('show_tam', 'start+=0.5')
              .to(tamLayer, {
                  opacity: 1,
                  z: 0,
                  scale: 1,
                  duration: 1.5,
                  ease: 'expo.out'
              });
            
            // Part 3: Fade out TAM and bring in SAM, showing the funnel effect
            masterTimeline.addLabel('show_sam', '+=1') // Add a pause for readability
              .to(tamLayer, {
                  opacity: 0,
                  scale: 0.8,
                  duration: 0.8,
                  ease: 'power2.in'
              })
              .fromTo(samLayer, { 
                  opacity: 0, z: 200, scale: 1.2 
              }, {
                  opacity: 1,
                  z: 0,
                  scale: 1,
                  duration: 1.5,
                  ease: 'expo.out'
              }, 'show_sam');

            // Part 4: Fade out SAM and bring in SOM, completing the funnel
            masterTimeline.addLabel('show_som', '+=1')
              .to(samLayer, {
                  opacity: 0,
                  scale: 0.8,
                  duration: 0.8,
                  ease: 'power2.in'
              })
              .fromTo(somLayer, {
                  opacity: 0, z: 200, scale: 1.2
              }, {
                  opacity: 1,
                  z: 0,
                  scale: 1,
                  duration: 1.5,
                  ease: 'expo.out'
              }, 'show_som')
              .fromTo(somLayer.querySelector('.funnel-card'), {
                  boxShadow: '0 0 0px rgba(212, 175, 55, 0)',
                  borderColor: 'var(--border-color)'
              }, {
                  // Add a final "glow" effect to emphasize the target market
                  boxShadow: 'var(--shadow-supreme)',
                  borderColor: 'var(--border-quantum)',
                  duration: 1,
                  ease: 'power2.inOut'
              }, 'show_som+=1');
        },

        setupMoatAnimations() {
            const section = document.getElementById('moat');
            const svgNS = "http://www.w3.org/2000/svg"; 
            const diagram = document.getElementById('moat-diagram'); 
            const tooltip = document.getElementById('moat-tooltip'); 

            if (!diagram || !tooltip) return;

            // --- Build the SVG Fortress Structure ---
            const center = { x: 500, y: 300 };
            const coreRadius = 60;
            let fortressHTML = `
                <defs>
                    <filter id="moat-glow" x="-50%" y="-50%" width="200%" height="200%">
                        <feGaussianBlur stdDeviation="10" result="coloredBlur"/>
                        <feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge>
                    </filter>
                </defs>
                <g id="fortress-core">
                    <circle cx="${center.x}" cy="${center.y}" r="${coreRadius}" fill="var(--brand-gold-medium)"/>
                    <text x="${center.x}" y="${center.y}" fill="var(--background-primary)" font-size="24" font-weight="bold" text-anchor="middle" alignment-baseline="middle" font-family="Orbitron">KARAVAN</text>
                </g>
            `;
            const rings = [150, 250, 350]; // Radii for the concentric moat rings
            rings.forEach((radius, index) => {
                fortressHTML += `<circle id="ring-${index}" class="moat-ring" cx="${center.x}" cy="${center.y}" r="${radius}" fill="none" stroke="var(--border-premium)" stroke-width="2" stroke-dasharray="15 10"/>`;
            });
            diagram.innerHTML = fortressHTML;

            // --- Animation Timeline ---
            const masterTimeline = gsap.timeline({
                scrollTrigger: {
                    trigger: section,
                    start: 'top 40%',
                    toggleActions: "play none reverse none", // Consistent cinematic playback
                },
                defaults: {
                    duration: 1.5,
                    ease: 'power2.out'
                }
            });

            // 1. Reveal the Core
            masterTimeline.fromTo('#fortress-core', 
                { scale: 0, transformOrigin: 'center center' },
                { scale: 1, ease: 'elastic.out(1, 0.5)' }
            );

            // 2. Animate the Moat Rings expanding outwards
            masterTimeline.from('.moat-ring', {
                strokeDashoffset: 500,
                r: coreRadius,
                opacity: 0,
                stagger: 0.3,
                ease: 'power3.out'
            }, "-=1.0");

            // 3. Animate the 15 Moat Points appearing on the outermost ring
            const outerRadius = rings[rings.length - 1];
            this.moatData.forEach((point, index) => {
                const angleRad = (point.angle - 90) * (Math.PI / 180);
                const x = center.x + outerRadius * Math.cos(angleRad);
                const y = center.y + outerRadius * Math.sin(angleRad);

                const pointGroup = document.createElementNS(svgNS, "g");
                pointGroup.classList.add('moat-point-group');

                const circle = document.createElementNS(svgNS, "circle");
                circle.setAttribute('class', 'moat-point');
                circle.setAttribute('cx', x);
                circle.setAttribute('cy', y);
                circle.setAttribute('r', 12);
                circle.setAttribute('fill', 'var(--brand-gold-rich)');
                circle.setAttribute('stroke', 'var(--brand-gold-dark)');
                circle.setAttribute('stroke-width', '2');
                circle.dataset.description = point.description;

                pointGroup.appendChild(circle);
                diagram.appendChild(pointGroup);

                // Add to timeline
                masterTimeline.fromTo(pointGroup, 
                    { scale: 0, transformOrigin: 'center center' },
                    { scale: 1, ease: 'elastic.out(1, 0.75)' },
                    `-=${index === 0 ? 0.5 : 1.4}` // Staggered appearance
                );
            });
            
            // 4. Add interactive hover effects AFTER the animation has played
            masterTimeline.add(() => {
                diagram.querySelectorAll('.moat-point').forEach(point => {
                    point.addEventListener('mouseenter', e => {
                        tooltip.innerHTML = e.target.dataset.description;
                        gsap.to(tooltip, { opacity: 1, duration: 0.3 });
                        gsap.to(e.target, { r: 18, fill: 'var(--brand-gold-light)', duration: 0.3, ease: 'power2.out' });
                    });
                    point.addEventListener('mousemove', e => {
                        // Position tooltip relative to the page, not the SVG
                        const rect = diagram.getBoundingClientRect();
                        gsap.set(tooltip, {
                            left: e.clientX - rect.left - (tooltip.offsetWidth / 2), 
                            top: e.clientY - rect.top - tooltip.offsetHeight - 20
                        });
                    });
                    point.addEventListener('mouseleave', e => {
                        gsap.to(tooltip, { opacity: 0, duration: 0.3 });
                        gsap.to(e.target, { r: 12, fill: 'var(--brand-gold-rich)', duration: 0.3, ease: 'power2.in' });
                    });
                });
            });
        },

        setupArchitectureAnimations() {
            const section = document.getElementById('architecture');
            const intro = document.getElementById('architecture-intro');
            const layer1 = document.getElementById('engine-layer-1');
            const layer2 = document.getElementById('engine-layer-2');
            const layer3 = document.getElementById('engine-layer-3');
            const space = document.getElementById('architecture-3d-space');

            if (!section || !layer1 || !layer2 || !layer3 || !space) return;

            // Set initial states for all elements
            gsap.set([layer1, layer2, layer3], { opacity: 0, z: -1000, rotationX: -90, transformOrigin: 'center center' });

            // The master cinematic timeline for this section
            const masterTimeline = gsap.timeline({
                scrollTrigger: {
                    trigger: section,
                    start: 'top 40%',
                    toggleActions: "play none reverse none", // NO SCRUB, NO PIN for a seamless playback
                },
                defaults: { ease: 'power2.out' }
            });
            
            // A helper function for the focus/defocus sequence
            const focusLayer = (layer, onComplete) => {
                const tl = gsap.timeline({ onComplete });
                tl.to(layer, { opacity: 1, z: 100, rotationX: 0, duration: 1, ease: 'expo.out' }) // Fly in and focus
                  .to(layer, { // Hold focus for a moment
                      duration: 1.5 
                  })
                  .to(layer, { opacity: 0.3, z: -500, scale: 0.8, duration: 1, ease: 'power2.in' }); // Recede
                return tl;
            };

            // 1. Build the cinematic sequence
            masterTimeline.addLabel('start')
              .add(focusLayer(layer1)) // Introduce Layer 1
              .add(focusLayer(layer2)) // Introduce Layer 2
              .add(focusLayer(layer3)); // Introduce Layer 3

            // 2. The Grand Finale: Assemble the stack
            masterTimeline.addLabel('assemble')
              .to([layer1, layer2, layer3], {
                  opacity: 1,
                  scale: 1,
                  stagger: 0.2,
                  duration: 1.5,
                  ease: 'expo.out'
              })
              .to(space, { // Tilt the entire 3D space
                  rotationX: -25,
                  rotationY: 20,
                  duration: 1.5,
                  ease: 'power3.inOut'
              }, '-=1.0')
              .to(layer1, { z: -300, y: 200, duration: 1.5, ease: 'power3.inOut' }, '-=1.5')
              .to(layer2, { z: 0, y: 0, duration: 1.5, ease: 'power3.inOut' }, '-=1.5')
              .to(layer3, { z: 300, y: -200, duration: 1.5, ease: 'power3.inOut' }, '-=1.5');
              
            // 3. Add Premium Hover Effects AFTER the main animation completes
            masterTimeline.add(() => {
                const layers = [layer1, layer2, layer3];
                const finalPositions = [
                    { z: -300, y: 200 },
                    { z: 0, y: 0 },
                    { z: 300, y: -200 }
                ];

                layers.forEach((layer, index) => {
                    layer.addEventListener('mouseenter', () => {
                        // On hover, bring this layer to the front and make others recede
                        gsap.to(layer, { z: finalPositions[index].z + 150, scale: 1.1, duration: 0.4, ease: 'power2.out' });
                        layers.forEach((otherLayer, otherIndex) => {
                            if (index !== otherIndex) {
                                gsap.to(otherLayer, { z: finalPositions[otherIndex].z - 50, scale: 0.95, opacity: 0.7, duration: 0.4, ease: 'power2.out' });
                            }
                        });
                    });
                    layer.addEventListener('mouseleave', () => {
                        // On leave, return all layers to their final assembled positions
                        layers.forEach((l, i) => {
                            gsap.to(l, { z: finalPositions[i].z, scale: 1, opacity: 1, duration: 0.4, ease: 'power2.out' });
                        });
                    });
                });
            });
        },

        setupDoctrineAnimations() {
            const section = document.getElementById('doctrine');
            const svg = document.getElementById('world-map-svg');
            const dashboard = document.getElementById('regulator-dashboard-overlay');

            if (!section || !svg) return;

            // --- Define Map Data ---
            const locations = {
                SG: { x: 830, y: 270, name: "Singapore" },
                PH: { x: 880, y: 230, name: "Philippines" },
                UAE: { x: 650, y: 190, name: "UAE" },
                IN: { x: 740, y: 210, name: "India" },
                ID: { x: 850, y: 300, name: "Indonesia" },
                EU: { x: 500, y: 120, name: "Europe" },
                LATAM: { x: 250, y: 320, name: "LATAM" },
                SSA: { x: 550, y: 320, name: "Sub-Saharan Africa" }
            };

            // --- Build the SVG Map ---
            let mapHTML = `
                <defs>
                    <filter id="map-glow"><feGaussianBlur stdDeviation="3" result="blur"/><feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
                </defs>
                <!-- THE CRITICAL FIX IS HERE: 'this.mapPath_placeholder' is now correctly referenced -->
                <path d="${this.mapPath_placeholder}" fill="var(--background-secondary)" stroke="var(--border-color)" stroke-width="0.5"/>
            `;
            Object.values(locations).forEach(loc => {
                // Correctly format IDs to be valid
                const nodeId = `node-${loc.name.replace(/\s+/g, '-')}`;
                mapHTML += `<circle class="map-node" id="${nodeId}" cx="${loc.x}" cy="${loc.y}" r="5" fill="var(--border-premium)" />`;
            });
            svg.innerHTML = mapHTML;
            
            // --- Animation Timeline ---
            const masterTimeline = gsap.timeline({
                scrollTrigger: {
                    trigger: section,
                    start: 'top 30%',
                    toggleActions: "play none reverse none"
                },
                defaults: { duration: 1, ease: 'power2.out' }
            });

            // Phase 1: ASEAN Hub Pilot
            masterTimeline.addLabel('phase_1')
              .call(() => document.getElementById('phase-1').classList.add('active-phase'))
              .fromTo(`#node-Singapore, #node-Philippines, #node-UAE`, { scale: 0 }, { scale: 1, stagger: 0.2, transformOrigin: 'center center', ease: 'elastic.out' })
              .add(this.createCorridor(svg, locations.SG, locations.PH), '+=0.5')
              .add(this.createCorridor(svg, locations.UAE, locations.PH));

            // Phase 2: MENA-Asia Bridge
            masterTimeline.addLabel('phase_2', '+=1.5')
              .call(() => {
                  document.getElementById('phase-1').classList.remove('active-phase');
                  document.getElementById('phase-2').classList.add('active-phase');
              })
              .fromTo(`#node-India, #node-Indonesia`, { scale: 0 }, { scale: 1, stagger: 0.2, transformOrigin: 'center center', ease: 'elastic.out' })
              .add(this.createCorridor(svg, locations.UAE, locations.IN), '+=0.5')
              .add(this.createCorridor(svg, locations.UAE, locations.ID));
              
            // Phase 3: Global Network Effect
            masterTimeline.addLabel('phase_3', '+=1.5')
              .call(() => {
                  document.getElementById('phase-2').classList.remove('active-phase');
                  document.getElementById('phase-3').classList.add('active-phase');
              })
              // THE CRITICAL FIX IS HERE: Corrected the ID for "Sub-Saharan Africa"
              .fromTo(`#node-Europe, #node-LATAM, #node-Sub-Saharan-Africa`, { scale: 0 }, { scale: 1, stagger: 0.2, transformOrigin: 'center center', ease: 'elastic.out' });
              
            // Final Step: Reveal Regulator Dashboard
            masterTimeline.addLabel('dashboard', '+=1.5')
              .to(dashboard, { opacity: 1, y: 0, duration: 1, ease: 'expo.out' })
              .call(() => {
                  dashboard.querySelectorAll('.stat-value[data-value]').forEach(el => {
                      const endValue = parseFloat(el.getAttribute('data-value'));
                      const prefix = el.getAttribute('data-prefix') || '';
                      const suffix = el.getAttribute('data-suffix') || '';
                      gsap.fromTo(el, { textContent: 0 }, {
                          textContent: endValue,
                          duration: 2,
                          ease: 'power2.out',
                          snap: { textContent: endValue % 1 !== 0 ? 0.01 : 1 },
                          onUpdate: function() {
                              let val = parseFloat(this.targets()[0].textContent);
                              el.textContent = prefix + (endValue % 1 !== 0 ? val.toFixed(2) : val.toLocaleString()) + suffix;
                          }
                      });
                  });
              });

            const style = document.createElement('style');
            style.innerHTML = `.phase-card.active-phase { border-color: var(--border-quantum); background: var(--background-primary); transform: scale(1.05); }`;
            document.head.appendChild(style);
        },

        // Helper function to create animated corridor lines
        createCorridor(svg, start, end) {
            const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
            const d = `M ${start.x} ${start.y} Q ${(start.x + end.x)/2} ${(start.y + end.y)/2 - 50} ${end.x} ${end.y}`;
            path.setAttribute("d", d);
            path.setAttribute("fill", "none");
            path.setAttribute("stroke", "var(--brand-gold-medium)");
            path.setAttribute("stroke-width", "2");
            path.style.strokeDasharray = "500";
            path.style.strokeDashoffset = "500";
            path.style.filter = "url(#map-glow)";
            svg.appendChild(path);

            return gsap.to(path, { strokeDashoffset: 0, duration: 1.5, ease: 'power2.inOut' });
        },

        // A placeholder for a long SVG path to avoid clutter
                mapPath_placeholder: "M995 242l-2-3-1-3-2-3-2-3-1-2-2-3-1-2-1-3-2-2-1-3-1-2-1-3-1-2-1-3-1-2-1-3-1-2-1-3-1-2-2-3-1-2-1-3-1-2-1-3-1-2-1-3-1-2-1-3-1-3-1-2-1-3-1-2-1-3-1-3-1-2-1-3-1-3-1-2-1-3-1-3-1-2-1-3-1-3-1-2-1-3-1-3-1-2-1-3-1-3-1-3-1-2-1-3-1-3-1-3-1-2-1-3-1-3-1-3-1-2-1-3-1-3-1-3-1-2-1-4-1-3-1-3-1-3-1-3-1-3-1-3-1-3-1-3-1-3-1-3-1-3-1-3-1-3-1-3-1-3-1-3-1-3-1-3-1-3-1-3-1-3-1-3-1-3-1-3-1-3-1-3-1-3-1-4-1-3-1-3-1-3-1-3-1-3-1-3-1-4-1-3-1-3-1-4-1-3-1-3-1-4-1-3-1-4-1-3-1-4-1-3-1-4-1-3-1-4-1-3-1-4-1-3-1-4-1-3-1-4-1-3-1-4-1-4-1-3-1-4-1-4-1-3-1-4-1-4-1-4-1-4-1-4-1-4-1-4-1-4-1-4-1-4-1-4-1-4-1-4-1-4-1-4-1-4-1-4-1-5-1-4-1-4-1-5-1-4-1-4-1-5-1-4-1-5-1-4-1-5-1-4-1-5-1-5-1-4-1-5-1-5-1-4-1-5-1-5-1-5-1-5-1-5-1-5-1-5-1-5-1-5-1-5-1-5-1-5-1-5-1-5-1-5-1-5-1-5-1-5-1-5-1-5-1-5-1-5-1-6-1-5-1-5-1-6-1-5-1-6-1-5-1-6-1-5-1-6-1-6-1-5-1-6-1-6-1-6-1-6-1-6-1-6-1-6-1-6-1-6-1-6-1-6-1-6-1-6-1-6-1-7-1-6-1-6-1-7-1-6-1-7-1-6-1-7-1-6-1-7-1-7-1-6-1-7-1-7-1-7-1-7-1-7-1-7-1-7-1-7-1-7-1-8-1-7-1-7-1-8-1-7-1-8-1-7-1-8-1-8-1-7-1-8-1-8-1-8-1-8-1-8-1-8-1-8-1-8-1-8-1-8-1-8-1-9-1-8-1-8-1-9-1-8-1-9-1-8-1-9-1-9-1-8-1-9-1-9-1-9-1-9-1-9-1-9-1-9-1-9-1-10-1-9-1-9-1-10-1-9-1-10-1-9-1-10-1-10-1-9-1-10-1-10-1-10-1-10-1-10-1-10-1-10-1-10-1-10-1-11-1-10-1-10-1-11-1-10-1-11-1-10-1-11-1-11-1-10-1-11-1-11-1-11-1-11-1-11-1-11-1-11-1-11-1-12-1-11-1-11-1-12-1-11-1-12-1-11-1-12-1-12-1-11-1-12-1-12-1-12-1-12-1-12-1-12-1-12-1-12-1-13-1-12-1-12-1-13-1-12-1-13-1-12-1-13-1-13-1-12-1-13-1-13-1-13-1-13-1-13-1-13-1-13-1-13-1-14-1-13-1-13-1-14-1-13-1-14-1-13-1-14-1-14-1-13-1-14-1-14-1-14-1-14-1-14-1-14-1-14-1-14-1-15-1-14-1-14-1-15-1-14-1-15-1-14-1-15-1-15-1-14-1-15-1-15-1-15-1-15-1-15-1-15-1-15-1-15-1-15-1-16-1-15-1-15-1-16-1-15-1-16-1-15-1-16-1-16-1-15-1-16-1-16-1-16-1-16-1-16-1-16-1-16-1-16-1-16-1-17-1-16-1-16-1-17-1-16-1-17-1-16-1-17-1-17-1-16-1-17-1-17-1-17-1-17-1-17-1-17-1-17-1-17-1-17-1-18-1-17-1-17-1-18-1-17-1-18-1-17-1-18-1-18-1-17-1-18-1-18-1-18-1-18-1-18-1-18-1-18-1-18-1-18-1-19-1-18-1-18-1-19-1-18-1-19-1-18-1-19-1-19-1-18-1-19-1-19-1-19-1-19-1-19-1-19-1-19-1-19-1-19-1-20-1-19-1-19-1-20-1-19-1-20-1-19-1-20-1-20-1-19-1-20-1-20-1-20-1-20-1-20-1-20-1-20-1-20-1-20-1-21-1-20-1-20-1-21-1-20-1-21-1-20-1-21-1-21-1-20-1-21-1-21-1-21-1-21-1-21-1-21-1-21-1-21-1-21-1-22-1-21-1-21-1-22-1-21-1-22-1-21-1-22-1-22-1-21-1-22-1-22-1-22-1-22-1-22-1-22-1-22-1-22-1-22-1-23-1-22-1-22-1-23-1-22-1-23-1-22-1-23-1-23-1-22-1-23-1-23-1-23-1-23-1-23-1-23-1-23-1-23-1-23-1-24-1-23-1-23-1-24-1-23-1-24-1-23-1-24-1-24-1-23-1-24-1-24-1-24-1-24-1-24-1-24-1-24-1-24-1-24-1-25-1-24-1-24-1-25-1-24-1-25-1-24-1-25-1-25-1-24-1-25-1-25-1-25-1-25-1-25-1-25-1-25-1-25-1-25-1-26-1-25-1-25-1-26-1-25-1-26-1-25-1-26-1-26-1-25-1-26-1-26-1-26-1-26-1-26-1-26-1-26-1-26-1-26-1-27-1-26-1-26-1-27-1-26-1-27-1-26-1-27-1-27-1-26-1-27-1-27-1-27-1-27-1-27-1-27-1-27-1-27-1-27-1-28-1-27-1-27-1-28-1-27-1-28-1-27-1-28-1-28-1-27-1-28-1-28-1-28-1-28-1-28-1-28-1-28-1-28-1-28-1-29-1-28-1-28-1-29-1-28-1-29-1-28-1-29-1-29-1-28-1-29-1-29-1-29-1-29-1-29-1-29-1-29-1-29-1-29-1-30-1-29-1-29-1-30-1-29-1-30-1-29-1-30-1-30-1-29-1-30-1-30-1-30-1-30-1-30-1-30-1-30-1-30-1-30-1-31-1-30-1-30-1-31-1-30-1-31-1-30-1-31-1-31-1-30-1-31-1-31-1-31-1-31-1-31-1-31-1-31-1-31-1-31-1-32-1-31-1-31-1-32-1-31-1-32-1-31-1-32-1-32-1-31-1-32-1-32-1-32-1-32-1-32-1-32-1-32-1-32-1-32-1-33-1-32-1-32-1-33-1-32-1-33-1-32-1-33-1-33-1-32-1-33-1-33-1-33-1-33-1-33-1-33-1-33-1-33-1-33-1-34-1-33-1-33-1-34-1-33-1-34-1-33-1-34-1-34-1-33-1-34-1-34-1-34-1-34-1-34-1-34-1-34-1-34-1-34-1-35-1-34-1-34-1-35-1-34-1-35-1-34-1-35-1-35-1-34-1-35-1-35-1-35-1-35-1-35-1-35-1-35-1-35-1-35-1-36-1-35-1-35-1-36-1-35-1-36-1-35-1-36-1-36-1-35-1-36-1-36-1-36-1-36-1-36-1-36-1-36-1-36-1-36-1-37-1-36-1-36-1-37-1-36-1-37-1-36-1-37-1-37-1-36-1-37-1-37-1-37-1-37-1-37-1-37-1-37-1-37-1-37-1-38-1-37-1-37-1-38-1-37-1-38-1-37-1-38-1-38-1-37-1-38-1-38-1-38-1-38-1-38-1-38-1-38-1-38-1-38-1-39-1-38-1-38-1-39-1-38-1-39-1-38-1-39-1-39-1-38-1-39-1-39-1-39-1-39-1-39-1-39-1-39-1-39-1-39-1-40-1-39-1-39-1-40-1-39-1-40-1-39-1-40-1-40-1-39-1-40-1-40-1-40-1-40-1-40-1-40-1-40-1-40-1-40-1-41-1-40-1-40-1-41-1-40-1-41-1-40-1-41-1-41-1-40-1-41-1-41-1-41-1-41-1-41-1-41-1-41-1-41-1-41-1-42-1-41-1-41-1-42-1-41-1-42-1-41-1-42-1-42-1-41-1-42-1-42-1-42-1-42-1-42-1-42-1-42-1-42-1-42-1-43-1-42-1-42-1-43-1-42-1-43-1-42-1-43-1-43-1-42-1-43-1-43-1-43-1-43-1-43-1-43-1-43-1-43-1-43-1-44-1-43-1-43-1-44-1-43-1-44-1-43-1-44-1-44-1-43-1-44-1-44-1-44-1-44-1-44-1-44-1-44-1-44-1-44-1-45-1-44-1-44-1-45-1-44-1-45-1-44-1-45-1-45-1-44-1-45-1-45-1-45-1-45-1-45-1-45-1-45-1-45-1-45-1-46-1-45-1-45-1-46-1-45-1-46-1-45-1-46-1-46-1-45-1-46-1-46-1-46-1-46-1-46-1-46-1-46-1-46-1-46-1-47-1-46-1-46-1-47-1-46-1-47-1-46-1-47-1-47-1-46-1-47-1-47-1-47-1-47-1-47-1-47-1-47-1-47-1-47-1-48-1-47-1-47-1-48-1-47-1-48-1-47-1-48-1-48-1-47-1-48-1-48-1-48-1-48-1-48-1-48-1-48-1-48-1-48-1-49-1-48-1-48-1-49-1-48-1-49-1-48-1-49-1-49-1-48-1-49-1-49-1-49-1-49-1-49-1-49-1-49-1-49-1-49-1-50-1-49-1-49-1-50-1-49-1-50-1-49-1-50-1-50-1-49-1-50-1-50-1-50-1-50-1-50-1-50-1-50-1-50-1-50-1-51-1-50-1-50-1-51-1-50-1-51-1-50-1-51-1-51-1-50-1-51-1-51-1-51-1-51-1-51-1-51-1-51-1-51-1-51-1-52-1-51-1-51-1-52-1-51-1-52-1-51-1-52-1-52-1-51-1-52-1-52-1-52-1-52-1-52-1-52-1-52-1-52-1-52-1-53-1-52-1-52-1-53-1-52-1-53-1-52-1-53-1-53-1-52-1-53-1-53-1-53-1-53-1-53-1-53-1-53-1-53-1-53-1-54-1-53-1-53-1-54-1-53-1-54-1-53-1-54-1-54-1-53-1-54-1-54-1-54-1-54-1-54-1-54-1-54-1-54-1-54-1-55-1-54-1-54-1-55-1-54-1-55-1-54-1-55-1-55-1-54-1-55-1-55-1-55-1-55-1-55-1-55-1-55-1-55-1-55-1-56-1-55-1-55-1-56-1-55-1-56-1-55-1-56-1-56-1-55-1-56-1-56-1-56-1-56-1-56-1-56-1-56-1-56-1-56-1-57-1-56-1-56-1-57-1-56-1-57-1-56-1-57-1-57-1-56-1-57-1-57-1-57-1-57-1-57-1-57-1-57-1-57-1-57-1-58-1-57-1-57-1-58-1-57-1-58-1-57-1-58-1-58-1-57-1-58-1-58-1-58-1-58-1-58-1-58-1-58-1-58-1-58-1-59-1-58-1-58-1-59-1-58-1-59-1-58-1-59-1-59-1-58-1-59-1-59-1-59-1-59-1-59-1-59-1-59-1-59-1-59-1-60-1-59-1-59-1-60-1-59-1-60-1-59-1-60-1-60-1-59-1-60-1-60-1-60-1-60-1-60-1-60-1-60-1-60-1-60-1-61-1-60-1-60-1-61-1-60-1-61-1-60-1-61-1-61-1-60-1-61-1-61-1-61-1-61-1-61-1-61-1-61-1-61-1-61-1-62-1-61-1-61-1-62-1-61-1-62-1-61-1-62-1-62-1-61-1-62-1-62-1-62-1-62-1-62-1-62-1-62-1-62-1-62-1-63-1-62-1-62-1-63-1-62-1-63-1-62-1-63-1-63-1-62-1-63-1-63-1-63-1-63-1-63-1-63-1-63-1-63-1-63-1-64-1-63-1-63-1-64-1-63-1-64-1-63-1-64-1-64-1-63-1-64-1-64-1-64-1-64-1-64-1-64-1-64-1-64-1-64-1-65-1-64-1-64-1-65-1-64-1-65-1-64-1-65-1-65-1-64-1-65-1-65-1-65-1-65-1-65-1-65-1-65-1-65-1-65-1-66-1-65-1-65-1-66-1-65-1-66-1-65-1-66-1-66-1-65-1-66-1-66-1-66-1-66-1-66-1-66-1-66-1-66-1-66-1-67-1-66-1-66-1-67-1-66-1-67-1-66-1-67-1-67-1-66-1-67-1-67-1-67-1-67-1-67-1-67-1-67-1-67-1-67-1-68-1-67-1-67-1-68-1-67-1-68-1-67-1-68-1-68-1-67-1-68-1-68-1-68-1-68-1-68-1-68-1-68-1-68-1-68-1-69-1-68-1-68-1-69-1-68-1-69-1-68-1-69-1-69-1-68-1-69-1-69-1-69-1-69-1-69-1-69-1-69-1-69-1-69-1-70-1-69-1-69-1-70-1-69-1-70-1-69-1-70-1-70-1-69-1-70-1-70-1-70-1-70-1-70-1-70-1-70-1-70-1-70-1-71-1-70-1-70-1-71-1-70-1-71-1-70-1-71-1-71-1-70-1-71-1-71-1-71-1-71-1-71-1-71-1-71-1-71-1-71-1-72-1-71-1-71-1-72-1-71-1-72-1-71-1-72-1-72-1-71-1-72-1-72-1-72-1-72-1-72-1-72-1-72-1-72-1-72-1-73-1-72-1-72-1-73-1-72-1-73-1-72-1-73-1-73-1-72-1-73-1-73-1-73-1-73-1-73-1-73-1-73-1-73-1-73-1-74-1-73-1-73-1-74-1-73-1-74-1-73-1-74-1-74-1-73-1-74-1-74-1-74-1-74-1-74-1-74-1-74-1-74-1-74-1-75-1-74-1-74-1-75-1-74-1-75-1-74-1-75-1-75-1-74-1-75-1-75-1-75-1-75-1-75-1-75-1-75-1-75-1-75-1-76-1-75-1-75-1-76-1-75-1-76-1-75-1-76-1-76-1-75-1-76-1-76-1-76-1-76-1-76-1-76-1-76-1-76-1-76-1-77-1-76-1-76-1-77-1-76-1-77-1-76-1-77-1-77-1-76-1-77-1-77-1-77-1-77-1-77-1-77-1-77-1-77-1-77-1-78-1-77-1-77-1-78-1-77-1-78-1-77-1-78-1-78-1-77-1-78-1-78-1-78-1-78-1-78-1-78-1-78-1-78-1-78-1-79-1-78-1-78-1-79-1-78-1-79-1-78-1-79-1-79-1-78-1-79-1-79-1-79-1-79-1-79-1-79-1-79-1-79-1-79-1-80-1-79-1-79-1-80-1-79-1-80-1-79-1-80-1-80-1-79-1-80-1-80-1-80-1-80-1-80-1-80-1-80-1-80-1-80-1-81-1-80-1-80-1-81-1-80-1-81-1-80-1-81-1-81-1-80-1-81-1-81-1-81-1-81-1-81-1-81-1-81-1-81-1-81-1-82-1-81-1-81-1-82-1-81-1-82-1-81-1-82-1-82-1-81-1-82-1-82-1-82-1-82-1-82-1-82-1-82-1-82-1-82-1-83-1-82-1-82-1-83-1-82-1-83-1-82-1-83-1-83-1-82-1-83-1-83-1-83-1-83-1-83-1-83-1-83-1-83-1-83-1-84-1-83-1-83-1-84-1-83-1-84-1-83-1-84-1-84-1-83-1-84-1-84-1-84-1-84-1-84-1-84-1-84-1-84-1-84-1-85-1-84-1-84-1-85-1-84-1-85-1-84-1-85-1-85-1-84-1-85-1-85-1-85-1-85-1-85-1-85-1-85-1-85-1-85-1-86-1-85-1-85-1-86-1-85-1-86-1-85-1-86-1-86-1-85-1-86-1-86-1-86-1-86-1-86-1-86-1-86-1-86-1-86-1-87-1-86-1-86-1-87-1-86-1-87-1-86-1-87-1-87-1-86-1-87-1-87-1-87-1-87-1-87-1-87-1-87-1-87-1-87-1-88-1-87-1-87-1-88-1-87-1-88-1-87-1-88-1-88-1-87-1-88-1-88-1-88-1-88-1-88-1-88-1-88-1-88-1-88-1-89-1-88-1-88-1-89-1-88-1-89-1-88-1-89-1-89-1-88-1-89-1-89-1-89-1-89-1-89-1-89-1-89-1-89-1-89-1-90-1-89-1-89-1-90-1-89-1-90-1-89-1-90-1-90-1-89-1-90-1-90-1-90-1-90-1-90-1-90-1-90-1-90-1-90-1-91-1-90-1-90-1-91-1-90-1-91-1-90-1-91-1-91-1-90-1-91-1-91-1-91-1-91-1-91-1-91-1-91-1-91-1-91-1-92-1-91-1-91-1-92-1-91-1-92-1-91-1-92-1-92-1-91-1-92-1-92-1-92-1-92-1-92-1-92-1-92-1-92-1-92-1-93-1-92-1-92-1-93-1-92-1-93-1-92-1-93-1-93-1-92-1-93-1-93-1-93-1-93-1-93-1-93-1-93-1-93-1-93-1-94-1-93-1-93-1-94-1-93-1-94-1-93-1-94-1-94-1-93-1-94-1-94-1-94-1-94-1-94-1-94-1-94-1-94-1-94-1-95-1-94-1-94-1-95-1-94-1-95-1-94-1-95-1-95-1-94-1-95-1-95-1-95-1-95-1-95-1-95-1-95-1-95-1-95-1-96-1-95-1-95-1-96-1-95-1-96-1-95-1-96-1-96-1-95-1-96-1-96-1-96-1-96-1-96-1-96-1-96-1-96-1-96-1-97-1-96-1-96-1-97-1-96-1-97-1-96-1-97-1-97-1-96-1-97-1-97-1-97-1-97-1-97-1-97-1-97-1-97-1-97-1-98-1-97-1-97-1-98-1-97-1-98-1-97-1-98-1-98-1-97-1-98-1-98-1-98-1-98-1-98-1-98-1-98-1-98-1-98-1-99-1-98-1-98-1-99-1-98-1-99-1-98-1-99-1-99-1-98-1-99-1-99-1-99-1-99-1-99-1-99-1-99-1-99-1-99z",
        setupTeamAnimations() {
            const section = document.getElementById('team');
            const container = document.getElementById('team-3d-space');
            const dossier = document.getElementById('team-dossier-text');
            const operatorName = document.getElementById('team-operator-name');
            const navControls = document.getElementById('team-nav-controls');
            const prevBtn = document.getElementById('team-prev-btn');
            const nextBtn = document.getElementById('team-next-btn');

            if (!section || !container || !dossier) return;

            // --- Dynamically Build and Inject Team Cards ---
            let cardsHTML = '';
            this.teamData.forEach((member, index) => {
                cardsHTML += `
                    <div id="team-card-${index}" class="team-card-3d absolute w-full md:w-1/4 h-80 cursor-pointer" data-index="${index}">
                        <div class="card-face card-front quantum-card rounded-2xl p-6 text-center flex flex-col items-center justify-center h-full w-full">
                            <i class="fas ${member.icon} text-4xl text-brand-gold-medium mb-4"></i>
                            <h3 class="font-bold text-lg text-text-diamond">${member.name}</h3>
                            <p class="text-sm text-text-muted">${member.title}</p>
                            <p class="font-semibold text-brand-gold-light mt-3">${member.role}</p>
                        </div>
                    </div>
                `;
            });
            container.innerHTML = cardsHTML;
            const cards = gsap.utils.toArray('.team-card-3d');
            let currentIndex = 0;

            // --- Carousel Logic ---
            const numCards = cards.length;
            const angleIncrement = 360 / numCards;
            const radius = 400; // Radius of the carousel circle

            function positionCards(rotationOffset = 0) {
                cards.forEach((card, index) => {
                    const angle = (index * angleIncrement + rotationOffset) * (Math.PI / 180);
                    const x = radius * Math.sin(angle);
                    const z = radius * Math.cos(angle) - radius; // Pulls the circle forward
                    const scale = (z + radius * 2) / (radius * 2); // Fakes perspective scaling
                    
                    gsap.to(card, {
                        x: x,
                        z: z,
                        rotationY: index * angleIncrement + rotationOffset,
                        scale: Math.max(0.4, scale * 0.8),
                        opacity: Math.max(0.2, scale * 0.9),
                        duration: 0.8,
                        ease: 'power3.out'
                    });
                });
                
                // Update text for the focused card
                const focusedCardIndex = (numCards - Math.round(rotationOffset / angleIncrement)) % numCards;
                const member = App.teamData[focusedCardIndex];
                
                gsap.to([operatorName, dossier], { opacity: 0, y: 10, duration: 0.3, onComplete: () => {
                    operatorName.textContent = member.name;
                    dossier.innerHTML = `<p class="italic">${member.bio}</p>`;
                    gsap.to([operatorName, dossier], { opacity: 1, y: 0, duration: 0.5 });
                }});
            }

            // --- Animation Timeline ---
            const masterTimeline = gsap.timeline({
                scrollTrigger: {
                    trigger: section,
                    start: 'top 40%',
                    toggleActions: "play none reverse none"
                }
            });

            // 1. Animate the cards appearing from the center
            masterTimeline.from(cards, {
                x: 0, y: 0, z: 0, rotationY: 0, scale: 0,
                opacity: 0,
                duration: 1.5,
                stagger: 0.1,
                ease: 'expo.out',
                onComplete: () => {
                    // 2. Once they've appeared, move them into the carousel formation
                    positionCards(0);
                    gsap.to(navControls, { opacity: 1, duration: 0.5 });
                }
            });

            // --- Add Interactivity ---
            function rotateCarousel(direction) {
                currentIndex += direction;
                const rotation = -currentIndex * angleIncrement;
                positionCards(rotation);
            }

            nextBtn.addEventListener('click', () => rotateCarousel(1));
            prevBtn.addEventListener('click', () => rotateCarousel(-1));

            // Add some CSS for the card faces that might not have been added
            const style = document.createElement('style');
            style.innerHTML = `.team-card-3d { transform-style: preserve-3d; left: 50%; top: 50%; margin-left: -12.5%; margin-top: -10rem; }`;
            document.head.appendChild(style);
        },
                
        setupScrollAnimations() {
            // This function's sole, definitive purpose is to handle the general "scrollytelling" animations
            // for all standard sections that DO NOT have a custom, dedicated cinematic sequence.

            // Define an explicit exclusion list of section IDs that are controlled by other animation functions.
            // This is the most robust and scalable architecture, preventing future conflicts.
            const excludedSections = [
                'imperative',          // Controlled by setupImperativeAnimations
                'thesis',              // Controlled by setupThesisAnimations
                'moat',                // Controlled by setupMoatAnimations
                'architecture',        // Controlled by setupArchitectureAnimations
                'doctrine',             // Controlled by setupDoctrineAnimations
                'team'             // Controlled by setupDoctrineAnimations
            ];

             gsap.utils.toArray('section').forEach(section => {
                // EXCLUSION LOGIC:
                // This condition now definitively ignores the hero section AND any section
                // with a dedicated cinematic timeline, ensuring zero animation conflicts.
                if (section.classList.contains('min-h-screen') || excludedSections.includes(section.id)) {
                    return; // Skip this section entirely.
                }
                
                // Apply a standard, elegant fade-and-rise animation to all other, non-cinematic sections.
                gsap.from(section.children, { 
                    scrollTrigger: { 
                        trigger: section, 
                        start: 'top 85%',   // Start animation when the section is 85% from the top of the viewport
                        end: 'top 50%',     // Animation is fully complete when the section is halfway up the screen
                        scrub: 1.2          // Smoothly link the animation progress to the scrollbar movement
                    }, 
                    opacity: 0, 
                    y: 75, // A more pronounced vertical rise for a premium, weighty feel
                    stagger: {
                        amount: 0.4, // Animate all direct children of the section over 0.4 seconds
                        from: "start"
                    },
                    ease: 'power3.out' // A professional and smooth easing function
                });
            });
            
            // FINAL CONFIRMATION:
            // All specific animation logic, such as number counters ('stat-value[data-value]'),
            // has been PERMANENTLY and CORRECTLY REMOVED from this general function.
            // That logic is now exclusively handled within their respective dedicated animation functions
            // (e.g., setupImperativeAnimations, setupDoctrineAnimations) to ensure perfect timing
            // and prevent any and all functional regressions or conflicts.
            // This function is now clean, definitive, and serves its single architectural purpose.
        },

        // Add a utility function to update the UTC time
        updateTime() {
            const timeEl = document.getElementById('utc-time');
            if(timeEl) {
                const now = new Date();
                timeEl.textContent = `UTC ${now.getUTCHours().toString().padStart(2,'0')}:${now.getUTCMinutes().toString().padStart(2,'0')}:${now.getUTCSeconds().toString().padStart(2,'0')}`;
            }
        },


        
        populateTeamAndCards() {
            const container = document.querySelector('#team .grid'); let teamHTML = '';
            this.teamData.forEach(member => { teamHTML += `<div class="team-card quantum-card rounded-2xl cursor-pointer relative h-80"> <div class="card-face card-front p-6 text-center flex flex-col items-center justify-center"> <i class="fas ${member.icon} text-4xl text-brand-gold-medium mb-4"></i> <h3 class="font-bold text-lg text-text-diamond">${member.name}</h3> <p class="text-sm text-text-muted">${member.title}</p> <p class="font-semibold text-brand-gold-light mt-3">${member.role}</p> <div class="mt-4 text-xs pill px-2 py-1 rounded-full">Click to Uncover Dossier</div> </div> <div class="card-face card-back p-6 text-center flex flex-col items-center justify-center bg-background-secondary rounded-2xl"> <p class="text-sm leading-relaxed">${member.bio}</p> </div> </div>`; });
            container.innerHTML = teamHTML; document.querySelectorAll('.team-card').forEach(card => card.addEventListener('click', () => card.classList.toggle('flipped')));
        },
        createMoatDiagram() {
            const svgNS = "http://www.w3.org/2000/svg"; const diagram = document.getElementById('moat-diagram'); const tooltip = document.getElementById('moat-tooltip'); if (!diagram || !tooltip) return;
            const center = { x: 500, y: 300 }; const radius = 250; let pointsHTML = ''; let labelsHTML = '';
            this.moatData.forEach(point => { const angleRad = (point.angle - 90) * (Math.PI / 180); const x = center.x + radius * Math.cos(angleRad); const y = center.y + radius * Math.sin(angleRad); const labelX = center.x + (radius + 40) * Math.cos(angleRad); const labelY = center.y + (radius + 40) * Math.sin(angleRad);
                pointsHTML += `<circle class="moat-point" cx="${x}" cy="${y}" r="10" fill="var(--brand-gold-medium)" stroke="var(--brand-gold-dark)" stroke-width="2" data-description="${point.description}" />`;
                labelsHTML += `<text class="moat-label" x="${labelX}" y="${labelY}" fill="var(--text-muted)" font-size="14" text-anchor="middle" alignment-baseline="middle">${point.label}</text>`;
            });
            diagram.innerHTML = `<g filter="url(#glow)"><circle cx="${center.x}" cy="${center.y}" r="${radius}" fill="none" stroke="var(--border-premium)" stroke-width="1" stroke-dasharray="10 5"/><circle cx="${center.x}" cy="${center.y}" r="50" fill="var(--brand-gold-medium)"/></g><text x="${center.x}" y="${center.y}" fill="var(--background-primary)" font-size="20" font-weight="bold" text-anchor="middle" alignment-baseline="middle">KARAVAN</text>${labelsHTML}${pointsHTML}<defs><filter id="glow"><feGaussianBlur stdDeviation="3.5" result="coloredBlur"/><feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge></filter></defs>`;
            diagram.querySelectorAll('.moat-point').forEach(point => {
                point.addEventListener('mouseenter', e => { tooltip.innerHTML = e.target.dataset.description; tooltip.style.opacity = '1'; });
                point.addEventListener('mousemove', e => { tooltip.style.left = `${e.clientX - tooltip.offsetWidth / 2}px`; tooltip.style.top = `${e.clientY - tooltip.offsetHeight - 20}px`; });
                point.addEventListener('mouseleave', () => { tooltip.style.opacity = '0'; });
            });
        },
// This is the new, severely upgraded, and CORRECTED object.
        SettlementProtocolVisualizer: {
            svg: null,
            infoPanel: null,
            navContainer: null,
            timeline: null,
            
            // Comprehensive data structure for each step of the visualization (remains unchanged)
            steps: [
                { id: 'initiation', title: 'STEP 1: INITIATION', duration: '0-30 Seconds', description: 'A user in Singapore inputs a transfer of SGD 1,000. The GECAN™ Pinnacle Quote™ engine calculates and locks in a legally-binding quote with institutional-grade FX rates and a transparent, sub-1% all-in fee.', assurance: 'Establishes an enforceable contractual price, eliminating hidden fees and FX spread manipulation common in legacy systems.', icon: 'fa-keyboard' },
                { id: 'onramp', title: 'STEP 2: FIAT ON-RAMP', duration: '30-75 Seconds', description: 'The user remits SGD via local payment rails (e.g., PayNow). The GECAN™ Singapore Licensed Partner (LP) confirms receipt via API integration, crediting the funds to a regulated, segregated client account.', assurance: 'Maintains full compliance with Monetary Authority of Singapore (MAS) regulations. Funds remain within the regulated financial system at all times.', icon: 'fa-university' },
                { id: 'compliance', title: 'STEP 3: CONVERSION & COMPLIANCE', duration: '75-90 Seconds', description: 'The received SGD is atomically converted into USDC by the LP. Simultaneously, the GECAN™ Compliance Firewall performs instant multi-vector screening against global sanctions lists, high-risk typologies, and illicit activity indicators.', assurance: 'Enforces military-grade, jurisdictional AML/CTF laws in milliseconds, achieving regulatory clearance prior to cross-border dispatch.', icon: 'fa-shield-alt' },
                { id: 'settlement', title: 'STEP 4: ATOMIC SETTLEMENT', duration: '90-95 Seconds', description: 'A cryptographically signed instruction is dispatched across the permissioned blockchain rail. The USDC value is simultaneously and atomically settled into the Philippines LP\'s treasury wallet. There is no float.', assurance: 'Blockchain-verified, irrevocable proof-of-settlement. Eliminates all counterparty and settlement failure risk inherent in the correspondent banking model.', icon: 'fa-bolt' },
                { id: 'offramp', title: 'STEP 5: FIAT OFF-RAMP', duration: '95-150 Seconds', description: 'The Philippines LP receives the USDC and the automated system executes an immediate local fiat (PHP) transfer via InstaPay to the beneficiary’s BPI bank account.', assurance: 'Transaction is fully compliant with Bangko Sentral ng Pilipinas (BSP) regulations, with a complete, auditable trail recorded by the locally licensed LP.', icon: 'fa-paper-plane' },
                { id: 'finality', title: 'STEP 6: JURIDICAL FINALITY', duration: '150-180 Seconds', description: 'InstaPay confirmation is received. A legally-defensible, tamper-proof Proof-of-Settlement Certificate (PoSC) is automatically generated, cryptographically sealed, and immutably recorded on-chain.', assurance: 'The PoSC serves as a contractually enforceable legal instrument, providing incontrovertible evidence of value transfer for all parties, auditors, and regulators.', icon: 'fa-file-contract' }
            ],
            
            init() {
                this.svg = document.getElementById('settlement-flow-svg');
                this.infoPanel = document.getElementById('settlement-info-panel');
                this.navContainer = document.getElementById('settlement-timeline-nav');
                if (!this.svg || !this.infoPanel || !this.navContainer) return;
                
                this.buildSVG();
                this.buildNav();
                this.buildAnimationTimeline(); // This function will now be re-architected
            },
            
            buildSVG() {
                // Defines the visual elements and their positions within the SVG canvas
                this.svg.innerHTML = `
                    <defs>
                        <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
                            <feGaussianBlur stdDeviation="5" result="coloredBlur"/>
                            <feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge>
                        </filter>
                        <linearGradient id="pathGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" style="stop-color:var(--brand-gold-rich);stop-opacity:1" />
                            <stop offset="100%" style="stop-color:var(--brand-gold-light);stop-opacity:1" />
                        </linearGradient>
                    </defs>

                    <!-- Jurisdictional Zones -->
                    <rect x="10" y="10" width="380" height="580" rx="20" fill="var(--background-primary)" opacity="0.2" stroke="var(--border-color)" />
                    <text x="200" y="50" fill="var(--text-muted)" font-size="20" text-anchor="middle" font-family="Orbitron">ORIGIN: SINGAPORE</text>
                    <rect x="810" y="10" width="380" height="580" rx="20" fill="var(--background-primary)" opacity="0.2" stroke="var(--border-color)" />
                    <text x="1000" y="50" fill="var(--text-muted)" font-size="20" text-anchor="middle" font-family="Orbitron">DESTINATION: PHILIPPINES</text>

                    <!-- 3D Blockchain Tunnel -->
                    <g id="tunnel-group" transform-origin="center center">
                        <path id="tunnel-path-bg" d="M 400 300 C 500 200, 700 200, 800 300" stroke="var(--border-color)" stroke-width="60" fill="none" opacity="0.2"/>
                        <path id="tunnel-path" d="M 400 300 C 500 200, 700 200, 800 300" stroke="url(#pathGradient)" stroke-width="4" fill="none" filter="url(#glow)"/>
                        <circle id="tx-particle" r="8" fill="var(--brand-gold-light)" filter="url(#glow)" opacity="0"/>
                    </g>
                    
                    <!-- Nodes -->
                    <g id="node-initiation" class="node-group"><circle cx="150" cy="150" r="30"/><text class="fa">&#xf11c;</text><text class="node-label">SENDER</text></g>
                    <g id="node-onramp" class="node-group"><circle cx="150" cy="450" r="30"/><text class="fa">&#xf19c;</text><text class="node-label">ORIGIN LP</text></g>
                    <g id="node-compliance" class="node-group"><circle cx="400" cy="300" r="40"/><text class="fa">&#xf132;</text><text class="node-label">COMPLIANCE FIREWALL</text></g>
                    <g id="node-offramp" class="node-group"><circle cx="1050" cy="150" r="30"/><text class="fa">&#xf19c;</text><text class="node-label">DESTINATION LP</text></g>
                    <g id="node-finality" class="node-group"><circle cx="1050" cy="450" r="40"/><text class="fa">&#xf15c;</text><text class="node-label">PoSC MINTED</text></g>

                    <!-- Connecting Paths -->
                    <path id="path-init-onramp" class="conn-path" d="M 150 180 V 420"/>
                    <path id="path-onramp-comp" class="conn-path" d="M 180 450 H 360"/>
                    <path id="path-comp-offramp" class="conn-path" d="M 800 300 C 900 400, 900 200, 1050 180"/>
                    <path id="path-offramp-final" class="conn-path" d="M 1050 180 V 410"/>

                    <style>
                        .node-group { cursor: pointer; transition: transform 0.3s ease; opacity: 0; transform: scale(0.5); }
                        .node-group:hover { transform: scale(1.1) !important; }
                        .node-group circle { fill: var(--background-secondary); stroke: var(--border-premium); stroke-width: 2; }
                        .node-group .fa { font-family: 'Font Awesome 6 Free'; font-weight: 900; font-size: 24px; fill: var(--brand-gold-light); text-anchor: middle; dominant-baseline: middle; transform: translateY(-5px); pointer-events: none; }
                        .node-group .node-label { font-size: 14px; fill: var(--text-silver); text-anchor: middle; dominant-baseline: middle; transform: translateY(15px); pointer-events: none; }
                        #node-compliance circle, #node-finality circle { r: 40; }
                        .conn-path { fill: none; stroke: var(--border-color); stroke-width: 1.5; stroke-dasharray: 5; stroke-dashoffset: 1000; }
                    </style>
                `;
            },
            
            buildNav() {
                let navHTML = '';
                this.steps.forEach((step, index) => {
                    navHTML += `<button data-step="${index}" class="timeline-nav-btn flex-1 text-center text-text-muted hover:text-text-gold transition-colors duration-300 p-2 rounded-lg">
                        <i class="fas fa-dot-circle block mx-auto mb-1 text-lg"></i>
                        <span class="text-xs font-semibold uppercase">${step.id}</span>
                    </button>`;
                });
                this.navContainer.innerHTML = navHTML;
                
                this.navContainer.querySelectorAll('.timeline-nav-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const stepIndex = parseInt(btn.dataset.step);
                        this.timeline.seek(`step-${stepIndex}`);
                    });
                });
            },
            
            updatePanel(index) {
                // This function is now enhanced for the cinematic timeline
                const step = this.steps[index];
                if (!step) return;

                // Create a container for the new content to animate it in
                const contentContainer = document.createElement('div');
                contentContainer.innerHTML = `
                    <p class="section-subtitle text-sm">${step.duration}</p>
                    <h3 class="section-title text-2xl mt-2 mb-4">${step.title}</h3>
                    <p class="text-base leading-relaxed mb-4">${step.description}</p>
                    <div class="p-4 bg-background-primary border-l-4 border-border-premium">
                        <h4 class="font-bold text-text-diamond text-sm mb-1">Key Assurance:</h4>
                        <p class="text-sm text-text-silver">${step.assurance}</p>
                    </div>
                `;
                
                // Animate out the old content and animate in the new
                gsap.to(this.infoPanel.children, {
                    opacity: 0,
                    y: -20,
                    duration: 0.3,
                    ease: 'power2.in',
                    onComplete: () => {
                        this.infoPanel.innerHTML = '';
                        this.infoPanel.appendChild(contentContainer);
                        gsap.fromTo(contentContainer, { opacity: 0, y: 20 }, { opacity: 1, y: 0, duration: 0.5, ease: 'power3.out' });
                    }
                });

                // Update active state on navigation buttons
                this.navContainer.querySelectorAll('.timeline-nav-btn').forEach((btn, i) => {
                    const icon = btn.querySelector('i');
                    if (i === index) {
                        btn.classList.add('active', 'text-text-gold'); btn.classList.remove('text-text-muted');
                        icon.className = `fas ${this.steps[i].icon} block mx-auto mb-1 text-lg text-brand-gold-medium`;
                    } else {
                        btn.classList.remove('active', 'text-text-gold'); btn.classList.add('text-text-muted');
                        icon.className = 'fas fa-dot-circle block mx-auto mb-1 text-lg';
                    }
                });
            },
            
            // THIS IS THE RE-ARCHITECTED, PINNACLE-GRADE ANIMATION FUNCTION
            buildAnimationTimeline() {
                // The master GSAP timeline that orchestrates the entire visualization
                const masterTimeline = gsap.timeline({
                    scrollTrigger: {
                        trigger: '.quantum-card', // Trigger on the parent card
                        start: 'top 40%',
                        toggleActions: "play none reverse none", // SEAMLESS CINEMATIC PLAYBACK
                    },
                    defaults: { ease: 'power2.out', duration: 1 }
                });
                
                this.timeline = masterTimeline;

                const showNode = (nodeId) => ({ opacity: 1, scale: 1, ease: 'elastic.out(1, 0.75)' });

                // Step 1: Initiation
                masterTimeline.addLabel('step-0')
                  .call(() => this.updatePanel(0))
                  .to('#node-initiation', showNode('#node-initiation'));

                // Step 2: On-Ramp
                masterTimeline.addLabel('step-1', "+=0.8") // Add pauses between steps
                  .call(() => this.updatePanel(1))
                  .to('#path-init-onramp', { strokeDashoffset: 0 })
                  .to('#node-onramp', showNode('#node-onramp'), "-=0.5");

                // Step 3: Compliance
                masterTimeline.addLabel('step-2', "+=0.8")
                  .call(() => this.updatePanel(2))
                  .to('#path-onramp-comp', { strokeDashoffset: 0 })
                  .to('#node-compliance', showNode('#node-compliance'), "-=0.5")
                  .to('#node-compliance .fa', { rotate: 360, duration: 1.5, ease: 'none' }, "-=0.5");

                // Step 4: Atomic Settlement (The 3D Tunnel)
                masterTimeline.addLabel('step-3', "+=0.8")
                  .call(() => this.updatePanel(3))
                  .to('#tunnel-group', { scale: 1.2, rotationX: -20, duration: 1, ease: 'power3.inOut' })
                  .set('#tx-particle', { opacity: 1 })
                  .to('#tx-particle', { 
                      motionPath: { 
                          path: '#tunnel-path', 
                          align: '#tunnel-path', 
                          autoRotate: true, 
                          alignOrigin: [0.5, 0.5] 
                      }, 
                      duration: 2, 
                      ease: 'power1.inOut' 
                  }, "-=0.5")
                  .to('#tunnel-group', { scale: 1, rotationX: 0, duration: 1, ease: 'power3.inOut' })
                  .set('#tx-particle', { opacity: 0 }, "-=0.5");

                // Step 5: Off-Ramp
                masterTimeline.addLabel('step-4', "+=0.8")
                  .call(() => this.updatePanel(4))
                  .to('#path-comp-offramp', { strokeDashoffset: 0 })
                  .to('#node-offramp', showNode('#node-offramp'), "-=0.5");

                // Step 6: Juridical Finality
                masterTimeline.addLabel('step-5', "+=0.8")
                  .call(() => this.updatePanel(5))
                  .to('#path-offramp-final', { strokeDashoffset: 0 })
                  .to('#node-finality', showNode('#node-finality'), "-=0.5")
                  .fromTo('#node-finality', { scale: 1 }, { scale: 1.2, yoyo: true, repeat: 1, duration: 0.4, ease: 'power2.inOut' }, "-=0.2");
            }
        },

        // --- ANIMATIONS & SCROLL TRIGGERS ---

        
        // --- CHARTS ---
        setupCharts() {
            const chartDefaultOptions = { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true, ticks: { color: 'var(--text-muted)' }, grid: { color: 'rgba(212, 175, 55, 0.1)' } }, x: { ticks: { color: 'var(--text-muted)' }, grid: { display: false } } } };
            const finCtx = document.getElementById('financial-chart').getContext('2d');
            const gradient = finCtx.createLinearGradient(0, 0, 0, 400); gradient.addColorStop(0, 'rgba(212, 175, 55, 0.6)'); gradient.addColorStop(1, 'rgba(212, 175, 55, 0.05)');
            new Chart(finCtx, { type: 'line', data: { labels: ['Y1', 'Y2', 'Y3', 'Y4', 'Y5'], datasets: [{ label: 'Gross Revenue ($M)', data: [0.45, 5.35, 19.75, 40.0, 70.5], backgroundColor: gradient, borderColor: 'var(--border-quantum)', borderWidth: 2, pointBackgroundColor: 'var(--text-diamond)', pointBorderColor: 'var(--border-quantum)', tension: 0.4, fill: true, }] }, options: chartDefaultOptions });
            const uofCtx = document.getElementById('use-of-funds-chart').getContext('2d');
            new Chart(uofCtx, { type: 'doughnut', data: { labels: ['Tech & Eng (40%)', 'Legal & Lic (25%)', 'Liquidity Net (20%)', 'GTM & Ops (15%)'], datasets: [{ data: [40, 25, 20, 15], backgroundColor: ['#FDE68A', '#D4AF37', '#C9A961', '#92400E'], borderColor: 'var(--background-secondary)', borderWidth: 4, hoverOffset: 15 }] }, options: { ...chartDefaultOptions, scales: {}, cutout: '60%', plugins: { legend: { position: 'bottom', labels: { color: 'var(--text-silver)', boxWidth: 15, padding: 20 } } } } });
            const corridorCtx = document.getElementById('corridor-chart')?.getContext('2d');
            if (corridorCtx) new Chart(corridorCtx, { type: 'bar', data: { labels: ['SG→PH', 'UAE→PH', 'UAE→IN', 'UAE→ID'], datasets: [{ label: 'Corridor Volume (Normalized)', data: [100, 85, 120, 95], backgroundColor: 'rgba(212, 175, 55, 0.5)', borderColor: 'var(--border-quantum)', borderWidth: 1 }] }, options: { ...chartDefaultOptions, indexAxis: 'y' } });
        },
        
        // --- MODAL & PDF ---
        setupModalAndPdf() {
            const modal = document.getElementById('dossier-modal'); const openBtns = [document.getElementById('download-dossier-btn'), document.getElementById('request-access-btn'), document.getElementById('invest-now-btn')]; const closeBtn = document.getElementById('close-modal-btn'); const backdrop = document.getElementById('modal-backdrop'); const form = document.getElementById('dossier-form');
            const openModal = () => { modal.classList.remove('hidden'); setTimeout(() => modal.classList.remove('opacity-0'), 10); };
            const closeModal = () => { modal.classList.add('opacity-0'); setTimeout(() => modal.classList.add('hidden'), 500); };
            openBtns.forEach(btn => btn.addEventListener('click', openModal)); closeBtn.addEventListener('click', closeModal); backdrop.addEventListener('click', closeModal); document.addEventListener('keydown', (e) => { if(e.key === 'Escape' && !modal.classList.contains('hidden')) closeModal(); });
            form.addEventListener('submit', (e) => { e.preventDefault(); this.handleDossierDownload(); });
        },
        handleDossierDownload() {
            const email = document.getElementById('investor-email').value; const password = document.getElementById('dossier-password').value; const errorDiv = document.getElementById('modal-error'); const correctPassword = "KinesisPrime2025";
            if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) { errorDiv.textContent = 'A valid corporate email address is required.'; errorDiv.classList.remove('hidden'); return; }
            if (password !== correctPassword) { errorDiv.textContent = 'Invalid Access Code. Please contact GECAN for credentials.'; errorDiv.classList.remove('hidden'); return; }
            errorDiv.classList.add('hidden'); this.generatePdf(email);
        },
        async generatePdf(investorEmail) {
            const btn = document.getElementById('submit-dossier-btn'); const originalHTML = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-cog fa-spin mr-2"></i>Forging Dossier...'; btn.disabled = true;
            console.log(`%c[GECAN COMPLIANCE] Dossier access authorized for: ${investorEmail}. IP and timestamp logged.`, "color: #D4AF37; font-weight: bold;");
            alert(`Access Authorized for ${investorEmail}.\nA compliance notification has been dispatched. Your download will begin shortly.`);
            const { jsPDF } = window.jspdf; const pdfRenderTarget = document.getElementById('pdf-render-target'); const pdfPages = pdfRenderTarget.querySelectorAll('.pdf-page');
            try {
                pdfRenderTarget.classList.remove('hidden'); const pdf = new jsPDF('p', 'mm', 'a4');
                for (let i = 0; i < pdfPages.length; i++) {
                    const canvas = await html2canvas(pdfPages[i], { scale: 3, useCORS: true, backgroundColor: '#ffffff' });
                    const imgData = canvas.toDataURL('image/jpeg', 0.95); const pdfWidth = pdf.internal.pageSize.getWidth(); const pdfHeight = pdf.internal.pageSize.getHeight();
                    if (i > 0) pdf.addPage();
                    pdf.addImage(imgData, 'JPEG', 0, 0, pdfWidth, pdfHeight);
                }
                pdf.save('Project-Kinesis-Strategic-Dossier-GECAN-PRIME.pdf');
                document.getElementById('dossier-modal').classList.add('hidden');
            } catch (error) {
                console.error("Pinnacle PDF Generation Failed:", error); alert("An error occurred while forging the dossier. Please try again or contact GECAN support.");
            } finally {
                pdfRenderTarget.classList.add('hidden'); btn.innerHTML = originalHTML; btn.disabled = false;
            }
        }
    };

    App.init();
});
</script>
</body>
</html>
